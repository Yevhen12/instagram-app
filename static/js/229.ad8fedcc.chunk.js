"use strict";(self.webpackChunkinstagram=self.webpackChunkinstagram||[]).push([[229],{4229:function(e,t,s){s.d(t,{Z:function(){return Ue}});var r=s(2791),n=s(3504),a=s(528),i=s(2982),l=s(1413),c=s(5861),o=s(885),u=s(7757),m=s.n(u),d=s(4117),x=s(6871),p=s(6030),f=s(3437),h=s(184),g=function(e){var t=e.children,s=e.styleForContainerBlock,r=e.styleForInnerBlock,n=e.dropMenuProfile,a=e.setDropMenuProfile,i=e.styleForWindowBlock;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{onClick:function(){a(!1)},className:"".concat(i,"\n        ").concat(n?"block pointer-events-auto":"hidden pointer-events-none")}),(0,h.jsx)("div",{className:"".concat(s," duration-200 ").concat(n?"opacity-1 top-12 pointer-events-auto":"opacity-0 top-6 pointer-events-none"),onClick:function(e){return e.stopPropagation()},children:(0,h.jsx)("div",{className:r,children:t})})]})},j=r.memo(g),v=s(9617),w=function(e){var t=e.user,s=e.redirectToAnotherUser;return(0,h.jsx)("li",{className:"py-1.5 pl-4 hover:bg-gray-100/50 cursor-pointer",onClick:function(){return s(t)},children:(0,h.jsxs)("div",{className:"flex justify-between items-center",children:[(0,h.jsx)("div",{className:"w-[2.75rem] h-[2.75rem] rounded-full overflow-hidden mt-1",children:(0,h.jsx)("img",{className:"w-full h-full object-cover",src:"".concat(t.imageUrl?t.imageUrl:"/instagram-app/images/standart-profile.png"),alt:"UserPhoto"})}),(0,h.jsx)("div",{className:"w-[17.8rem] pr-5",children:(0,h.jsx)("p",{className:"font-semibold text-sm",children:t.displayName})})]})})},N=r.memo(w),y=function(e){var t=e.usersSuggestions,s=e.setActiveModal,n=e.activeModal,a=e.redirectToAnotherUser,i=e.isLoading,l=(0,r.useMemo)((function(){return t.map((function(e){return(0,h.jsx)(N,{user:e,redirectToAnotherUser:a},e.uid)}))}),[t]);return(0,h.jsx)(j,{styleForWindowBlock:"w-full h-full fixed top-0 left-0 flex justify-center items-center z-10 cursor-default ",dropMenuProfile:n,setDropMenuProfile:s,styleForContainerBlock:"absolute w-[23.4rem] h-[22.6rem] shadow-defaultModal rounded bg-white flex top-14 right-3 p-0 m-0 z-20",styleForInnerBlock:"flex flex-col w-full overflow-y-scroll",children:l.length>0?(0,h.jsx)("ul",{className:"pt-3",children:i?(0,h.jsx)("div",{className:"h-[340px]",children:(0,h.jsx)(v.Z,{height:30,width:30})}):l}):(0,h.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,h.jsx)("p",{className:"text-sm text-gray-400",children:"No results found."})})})},b=r.memo(y),U=s(9062),k=s(4592),Z=function(e){var t=e.user,s=e.redirectToAnotherUser,r=(e.recentUsers,e.setRecentUsers),n=(0,p.v9)((function(e){return e.userReducer.user})),a=(0,p.I0)(),o=function(){var e=(0,c.Z)(m().mark((function e(t,s){var c,o;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.stopPropagation(),c=(0,U.JU)(k.db,"users","".concat(n.uid)),o=n.recentVisitedUsers.filter((function(e){return e.uid!==t})),a((0,f.a)((0,l.Z)((0,l.Z)({},n),{},{recentVisitedUsers:(0,i.Z)(o)}))),r(o),e.next=7,(0,U.r7)(c,{recentVisitedUsers:(0,i.Z)(o)});case 7:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}();return(0,h.jsx)("li",{className:"py-1.5 pl-4 hover:bg-gray-100/50 cursor-pointer",onClick:function(){return s(t)},children:(0,h.jsxs)("div",{className:"flex justify-left items-center",children:[(0,h.jsx)("div",{className:"w-[2.75rem] h-[2.75rem] rounded-full overflow-hidden mt-1 mr-3",children:(0,h.jsx)("img",{className:"w-full h-full object-cover",src:"".concat(t.imageUrl?t.imageUrl:"/instagram-app/images/standart-profile.png"),alt:"UserPhoto"})}),(0,h.jsx)("div",{className:"w-[15.5rem] pr-5",children:(0,h.jsx)("p",{className:"font-semibold text-sm",children:t.displayName})}),(0,h.jsx)("button",{type:"button",className:"p-1",onClick:function(e){return o(t.uid,e)},children:(0,h.jsx)("img",{alt:"close",src:"/instagram-app/images/close-icon.png",className:"w-3.5 h-3.5 opacity-60"})})]})})},M=r.memo(Z),P=function(e){var t=e.activeModal,s=e.setActiveModal,n=e.redirectToAnotherUser,a=(0,p.v9)((function(e){return e.userReducer.user})),i=(0,r.useState)([]),u=(0,o.Z)(i,2),d=u[0],x=u[1],g=(0,r.useState)(!1),w=(0,o.Z)(g,2),N=w[0],y=w[1],b=(0,p.I0)(),Z=function(){var e=(0,c.Z)(m().mark((function e(){var t;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,U.JU)(k.db,"users","".concat(a.uid)),b((0,f.a)((0,l.Z)((0,l.Z)({},a),{},{recentVisitedUsers:[]}))),x([]),e.next=5,(0,U.r7)(t,{recentVisitedUsers:[]});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,r.useEffect)((function(){y(!0);var e=function(){var e=(0,c.Z)(m().mark((function e(){var t,s;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,U.JU)(k.db,"users",a.uid),e.next=3,(0,U.QT)(t);case 3:s=e.sent,x(s.data().recentVisitedUsers),y(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var P=(0,r.useMemo)((function(){return d.map((function(e){return(0,h.jsx)(M,{user:e,recentUsers:d,setRecentUsers:x,redirectToAnotherUser:n},e.uid)}),[d])}));return(0,h.jsxs)(j,{styleForWindowBlock:"w-full h-full fixed top-0 left-0 flex justify-center items-center z-10 cursor-default ",dropMenuProfile:t,setDropMenuProfile:s,styleForContainerBlock:"absolute w-[23.4rem] h-[22.6rem] shadow-defaultModal rounded bg-white flex top-14 right-3 p-0 m-0 z-20",styleForInnerBlock:"flex flex-col w-full overflow-y-scroll",children:[(0,h.jsxs)("div",{className:"flex justify-between pt-5 px-4",children:[(0,h.jsx)("p",{className:"font-semibold",children:"Recent"}),(0,h.jsx)("button",{type:"button",className:"text-sm font-semibold text-[#0195f6]",onClick:function(){return Z()},children:"Clear all"})]}),(0,h.jsxs)("ul",{className:"pt-2",children:[N?(0,h.jsx)("div",{className:"h-[270px]",children:(0,h.jsx)(v.Z,{height:30,width:30})}):P,0===d.length&&!N&&(0,h.jsx)("p",{className:"text-sm p-4 font-semibold",children:"No recent searches."})]})]})},C=r.memo(P),A=function(){var e=(0,p.v9)((function(e){return e.userReducer.user})),t=(0,p.I0)(),s=(0,r.useRef)(null),n=(0,d.Z)().searchUsers,a=(0,r.useState)(""),u=(0,o.Z)(a,2),g=u[0],j=u[1],v=(0,r.useState)(!1),w=(0,o.Z)(v,2),N=w[0],y=w[1],Z=(0,r.useState)([]),M=(0,o.Z)(Z,2),P=M[0],A=M[1],F=(0,r.useState)(!1),S=(0,o.Z)(F,2),R=S[0],B=S[1],z=(0,x.s0)();(0,r.useEffect)((function(){g.length>0&&y(!0)}),[g]);var T=function(){var e=(0,c.Z)(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(t.target.value),B(!0),e.t0=A,e.next=5,n(t.target.value);case 5:e.t1=e.sent,(0,e.t0)(e.t1),B(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var s=(0,c.Z)(m().mark((function s(r){var n,a,c,o,u;return m().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return n=r.displayName,a=r.imageUrl,c=r.uid,y(!1),z("/".concat(n)),o=(0,U.JU)(k.db,"users","".concat(e.uid)),u=e.recentVisitedUsers.filter((function(e){return e.displayName!=n})),t((0,f.a)((0,l.Z)((0,l.Z)({},e),{},{recentVisitedUsers:[{displayName:n,imageUrl:a,uid:c}].concat((0,i.Z)(u))}))),s.next=8,(0,U.r7)(o,{recentVisitedUsers:[{displayName:n,imageUrl:a,uid:c}].concat((0,i.Z)(u))});case 8:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}();return(0,h.jsxs)("div",{className:"relative",children:[(0,h.jsx)("div",{className:"absolute z-20",children:(0,h.jsx)("input",{placeholder:"Search",style:N?null:{paddingLeft:"40px"},className:"bg-[#8E8E8E]/10 font-light outline-none py-1.5 px-4 rounded-lg placeholder:text-gray-400 placeholder:font-light w-[16.7rem] ".concat(N?"text-black":"text-gray-400"),onFocus:function(){y(!0)},onChange:T,value:g,ref:s})}),g.length>0&&N?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:"h-4 w-4 absolute top-2.5 right-20 opacity-20 cursor-pointer z-20",type:"button",onClick:function(e){j(""),A([]),s.current.focus()},children:(0,h.jsx)("img",{src:"/instagram-app/images/close-for-search.png"})}),(0,h.jsx)(b,{isLoading:R,usersSuggestions:P,activeModal:N,setActiveModal:y,redirectToAnotherUser:I})]}):0===g.length&&N?(0,h.jsx)(C,{activeModal:N,setActiveModal:y,redirectToAnotherUser:I}):!N&&(0,h.jsx)("div",{className:"h-3.5 w-3.5 absolute opacity-40 top-3 left-4",children:(0,h.jsx)("img",{src:"/instagram-app/images/zoom-for-search.png"})})]})},F=r.memo(A),S=function(){return(0,h.jsxs)("div",{className:"flex justify-between",children:[(0,h.jsx)(n.rU,{to:a.H4,children:(0,h.jsx)("button",{className:"py-1.5 px-3 bg-blue-500 text-white rounded text-sm font-bold mr-5",children:"Log in"})}),(0,h.jsx)(n.rU,{to:a._5,children:(0,h.jsx)("button",{className:"py-1.5 px-3  text-black rounded text-sm font-bold",children:"Sign up"})})]})},R=r.memo(S),B=s(5725),z=s(4177),T=function(e){var t=e.post,s=e.setPost;return(0,h.jsx)("div",{className:"flex flex-col items-center justify-center w-full h-[calc(100%-50px)]",children:t.images[0]?(0,h.jsx)("img",{alt:"postphoto",src:URL.createObjectURL(t.images[0]),className:"w-full h-full object-contain rounded-b-xl bg-black"}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:"w-20 h-20 mb-5",children:(0,h.jsx)("img",{src:"/instagram-app/images/multimedia-icon.png"})}),(0,h.jsx)("p",{className:"font-light text-2xl mb-5 cursor-text",children:"Drag photos and videos here"}),(0,h.jsx)("div",{children:(0,h.jsxs)("label",{className:"px-2.5 py-1.5 font-semibold text-white bg-[#0195f6] rounded text-sm cursor-pointer",children:["Select from computer",(0,h.jsx)("input",{type:"file",className:"hidden",onChange:function(e){return function(e){e.target.files&&s((function(t){return(0,l.Z)((0,l.Z)({},t),{},{images:[].concat((0,i.Z)(t.images),[e.target.files[0]])})}))}(e)}})]})})]})})},I=r.memo(T),L=function(e){var t=e.setPage,s=e.post,r=e.setPost;return(0,h.jsx)("div",{className:"border-b h-[50px]",children:s.images.length>0?(0,h.jsxs)("div",{className:"flex justify-between h-full items-center px-5",children:[(0,h.jsx)("button",{onClick:function(){r({images:[]})},children:(0,h.jsx)("img",{src:"/instagram-app/images/left-arrow-icon.png",className:"w-7 h-7",alt:"back"})}),(0,h.jsx)("p",{className:"font-semibold",children:"Crop"}),(0,h.jsx)("button",{onClick:function(){return t((function(e){return e+1}))},className:"text-sm font-semibold text-[#0195f6]",children:"Next"})]}):(0,h.jsx)("div",{className:"flex justify-center h-full items-center",children:(0,h.jsx)("p",{className:"py-3 font-semibold",children:"Create new post"})})})},D=r.memo(L),V=function(e){var t=e.activeModal,s=e.setActiveModal,r=e.setPage,n=e.setPost,a=e.post;return(0,h.jsx)(z.Z,{activeModal:t,setActiveModal:s,styleForContainerBlock:"fixed w-screen h-screen top-0 left-0 right-0 flex justify-center items-center z-20 cursor-default bg-black/60 duration-300",closeModal:function(){r(0),n({images:[]})},children:(0,h.jsxs)("div",{className:"mx-5 lg:max-w-[700px] max-w-[400px] w-full h-[80vh] bg-white rounded-xl duration-300 ".concat(t?"opacity-1 scale-100":"opacity-0 scale-50"),onClick:function(e){return e.stopPropagation()},children:[(0,h.jsx)(D,{post:a,setPost:n,setPage:r}),(0,h.jsx)(I,{post:a,setPost:n})]})})},E=r.memo(V),W=s(4453),H=s(2539),J=function(e,t,s,r,n,a){return function(){var o=(0,c.Z)(m().mark((function c(o){var u,d,x,p,h,g,j;return m().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return u=e.displayName,d=e.uid,x=e.imageUrl,p="/images/".concat(e.uid,"/posts/").concat(t.images[0].name),h=(0,W.iH)(k.tO,p),c.next=5,(0,W.KV)(h,t.images[0]);case 5:return c.next=7,(0,W.Jt)(h);case 7:return g=c.sent,j={image:g,text:a,comments:[],likes:[],uid:(new Date).getTime().toString(),user:{displayName:u,uid:d,imageUrl:x}},c.next=11,(0,U.r7)((0,U.JU)(k.db,"users",e.uid),{posts:[].concat((0,i.Z)(e.posts),[j])});case 11:o((0,f.a)((0,l.Z)((0,l.Z)({},e),{},{posts:[j].concat((0,i.Z)(e.posts))}))),s((0,l.Z)((0,l.Z)({},e),{},{posts:[j].concat((0,i.Z)(e.posts))})),n&&n!==e.displayName||!r.posts||o((0,H.l)((0,l.Z)((0,l.Z)({},r),{},{posts:[j].concat((0,i.Z)(r.posts))})));case 14:case"end":return c.stop()}}),c)})));return function(e){return o.apply(this,arguments)}}()},O=function(e){var t=e.setPage,s=e.post,n=e.text,a=e.setActiveModal,i=e.setPost,l=(0,p.v9)((function(e){return e.userReducer.user})),u=(0,p.v9)((function(e){return e.currentProfileUserReducer.user})),d=(0,r.useState)(!1),f=(0,o.Z)(d,2),g=f[0],j=f[1],w=(0,r.useContext)(B._).setFirestoreCurrentUser,N=(0,p.I0)(),y=(0,x.UO)().user,b=function(){var e=(0,c.Z)(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j(!0),N(J(l,s,w,u,y,n)),t(0),i({images:[]}),j(!1),a(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)("div",{className:"border-b h-[50px]",children:(0,h.jsxs)("div",{className:"flex justify-between h-full items-center px-5",children:[(0,h.jsx)("button",{onClick:function(){t((function(e){return e-1}))},children:(0,h.jsx)("img",{src:"/instagram-app/images/left-arrow-icon.png",className:"w-7 h-7",alt:"back"})}),(0,h.jsx)("p",{className:"font-semibold",children:"Create new post"}),(0,h.jsx)("button",{onClick:function(){return b()},type:"button",children:(0,h.jsxs)("div",{className:"flex items-center",children:[(0,h.jsx)("p",{className:"text-sm font-semibold text-[#0195f6] mr-1",children:"Share"}),g&&(0,h.jsx)(v.Z,{width:15,height:15})]})})]})})})},_=r.memo(O),q=s(2631),Q=s(749),Y=function(e){var t=e.post,s=e.setText,n=e.text,a=(0,p.v9)((function(e){return e.userReducer.user})),i=(0,Q.Z)(),l=(0,r.useState)(!1),c=(0,o.Z)(l,2),u=c[0],m=c[1],d={width:"250px",position:"absolute",top:i.innerWidth<1024?"-320px":"50px",left:"0px",zIndex:"21"};return(0,h.jsxs)("div",{className:"flex lg:flex-row flex-col h-[calc(100%-50px)]",children:[(0,h.jsx)("div",{className:"lg:w-[700px] w-[400px] lg:h-full h-[50%]",children:(0,h.jsx)("img",{alt:"postphoto",src:URL.createObjectURL(t.images[0]),className:"w-full h-full object-contain bg-black lg:rounded-bl-xl"})}),(0,h.jsx)("div",{className:"lg:w-[calc(100%-700px)] w-full py-5 lg:h-full h-[50%]",children:(0,h.jsxs)("div",{className:"flex flex-col",children:[(0,h.jsxs)("div",{className:"flex",children:[(0,h.jsx)("div",{className:"overflow-hidden mr-3 pl-5",children:(0,h.jsx)("img",{alt:"userPhoto",src:a.imageUrl?a.imageUrl:"/instagram-app/images/standart-profile.png",className:"w-7 h-7 object-cover rounded-full"})}),(0,h.jsx)("p",{className:"font-semibold mt-0.5",children:a.displayName})]}),(0,h.jsx)("textarea",{value:n,className:"outline-none mt-5 resize-none lg:h-[170px] max-h-[100px] h-full px-5",placeholder:"Write a caption...",onChange:function(e){return function(e){console.log(n);var t=e.target.value;s(t)}(e)}}),(0,h.jsxs)("div",{className:"h-[50px] flex justify-between items-center border-b relative",children:[(0,h.jsx)("button",{className:"pl-5",onClick:function(){return m((function(e){return!e}))},children:(0,h.jsx)("img",{alt:"emoji",src:"/instagram-app/images/smile-icon.png",className:"w-5 h-5 opacity-50"})}),(0,h.jsx)(q.Z,{showPicker:u,setShowPicker:m,pickerStyle:d,setText:s}),(0,h.jsxs)("p",{className:"text-xs text-black/40 pr-5",children:[n.length," / 2,200"]})]})]})})]})},K=r.memo(Y),G=function(e){var t=e.activeModal,s=e.setActiveModal,n=e.setPage,a=e.setPost,i=e.post,l=(0,r.useState)(""),c=(0,o.Z)(l,2),u=c[0],m=c[1];return(0,h.jsx)(z.Z,{activeModal:t,setActiveModal:s,styleForContainerBlock:"fixed w-screen h-screen top-0 left-0 right-0 flex justify-center items-center z-20 cursor-default bg-black/60 duration-300",closeModal:function(){n(0),a({images:[]})},children:(0,h.jsxs)("div",{className:"mx-5 lg:max-w-[1050px] max-w-[400px] w-full h-[80vh] bg-white rounded-xl duration-300 ".concat(t?"opacity-1 scale-100":"opacity-0 scale-50"),onClick:function(e){return e.stopPropagation()},children:[(0,h.jsx)(_,{setPage:n,post:i,text:u,setPost:a,setActiveModal:s}),(0,h.jsx)(K,{text:u,setText:m,post:i})]})})},X=r.memo(G),$=function(e){var t=e.activeModal,s=e.setActiveModal,n=(0,r.useState)(0),a=(0,o.Z)(n,2),i=a[0],l=a[1],c=(0,r.useState)({images:[]}),u=(0,o.Z)(c,2),m=u[0],d=u[1];return(0,h.jsxs)(h.Fragment,{children:[0===i&&(0,h.jsx)(E,{activeModal:t,setActiveModal:s,setPage:l,setPost:d,post:m}),1===i&&(0,h.jsx)(X,{activeModal:t,setActiveModal:s,setPage:l,setPost:d,post:m,page:i})]})},ee=r.memo($),te=s(519),se=function(e){var t=e.text,s=e.style,r=e.imageUrl,a=e.action,i=e.link,l={backgroundImage:"url(".concat("/instagram-app"+r,")"),backgroundSize:"15px 15px",backgroundRepeat:"no-repeat",backgroundPosition:"top 15px left 15px"};return(0,h.jsx)("div",{onClick:a,style:r?l:{paddingLeft:"15px",borderTop:"1px solid rgb(220, 220, 220)"},className:"".concat(s),children:i?(0,h.jsx)(n.rU,{to:i,children:(0,h.jsx)("p",{children:t})}):(0,h.jsx)("p",{children:t})})},re=r.memo(se),ne=s(1457),ae=s(289),ie=function(e){var t=e.dropMenuProfile,s=e.setDropMenuProfile,n=(0,p.v9)((function(e){return e.userReducer.user})),i=(0,r.useState)(!1),l=(0,o.Z)(i,2),u=l[0],d=l[1],g=(0,r.useContext)(B._),v=g.setFirestoreCurrentUser,w=g.firestoreCurrentUser,N=(0,x.s0)(),y=(0,p.I0)(),b=function(){var e=(0,c.Z)(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v({displayName:"",name:"",email:"",password:"",imageUrl:"",birthday:{year:"",day:"",month:""},uid:"",followers:[],following:[],posts:[],savedPosts:[],recentVisitedUsers:[]}),y((0,f.a)(w)),e.next=4,(0,ae.w7)(k.I8);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(j,{styleForWindowBlock:"w-full h-full fixed top-0 left-0 flex justify-center items-center z-20 cursor-default ",styleForContainerBlock:"absolute w-60 shadow-defaultModal rounded bg-white flex items-center right-0 p-0 m-0 z-30",styleForInnerBlock:"flex items-center flex-col w-full",dropMenuProfile:t,setDropMenuProfile:s,children:[(0,h.jsx)(re,{imageUrl:"/images/user-icon.png",text:"Profile",action:function(){s(!1)},style:"leading-[2.7rem] hover:bg-slate-50 w-full flex-1 text-sm relative pl-12",link:"/".concat(n.displayName)}),(0,h.jsx)(re,{imageUrl:"/images/save-icon.png",text:"Saved",action:function(){N("/".concat(n.displayName,"/").concat(te.si)),s(!1)},style:"leading-[2.7rem] hover:bg-slate-50 w-full flex-1 text-sm relative pl-12",link:"/".concat(n.displayName)}),(0,h.jsx)(re,{imageUrl:"/images/exchange-icon.png",text:"Change user",action:function(){d(!0),s(!1)},style:"leading-[2.7rem] hover:bg-slate-50 w-full flex-1 text-sm relative pl-12"}),(0,h.jsx)(re,{imageUrl:null,text:"Exit",action:b,style:"leading-[2.7rem] hover:bg-slate-50 w-full flex-1 text-sm relative pl-12",link:a.H4})]}),(0,h.jsx)(ne.Z,{activeModal:u,setActiveModal:d})]})},le=r.memo(ie),ce=s(1485),oe=function(e){var t=e.activity,s=(0,p.v9)((function(e){return e.userReducer.user})),r="Now";return r="Now"===(r=(0,ce.Z)(t.createdAt).split(" "))[1]?"Now":r[0]+r[1][0],(0,h.jsxs)("div",{className:"flex items-center my-3",children:[(0,h.jsx)(n.rU,{to:"/".concat(t.displayName),children:(0,h.jsx)("div",{className:"overflow-hidden rounded-full w-[44px] h-[44px] mr-3",children:(0,h.jsx)("img",{alt:"userPhoto",src:"".concat(t.imageUrl?t.imageUrl:"/instagram-app/images/standart-profile.png"),className:"w-full h-full object-cover"})})}),(0,h.jsxs)("div",{className:"w-full flex",children:[(0,h.jsx)(n.rU,{to:"/".concat(t.displayName),children:(0,h.jsx)("p",{className:"font-semibold text-sm mr-2",children:t.displayName})}),(0,h.jsx)("p",{className:"text-sm mr-1",children:"liked your photo."}),(0,h.jsx)("p",{className:"text-sm text-gray-500/70",children:r})]}),(0,h.jsx)("div",{className:"min-w-[40px] h-[40px]",children:(0,h.jsx)(n.rU,{to:"/".concat(s.displayName,"/").concat(t.post.uid),children:(0,h.jsx)("img",{alt:"postPhoto",src:t.post.imageUrl,className:"object-cover w-[40px] h-[40px]"})})})]})},ue=r.memo(oe),me=function(e){var t=e.activity,s=(0,p.v9)((function(e){return e.userReducer.user})),r="Now";return r="Now"===(r=(0,ce.Z)(t.createdAt).split(" "))[1]?"Now":r[0]+r[1][0],(0,h.jsxs)("div",{className:"flex items-center my-3",children:[(0,h.jsx)(n.rU,{to:"/".concat(t.displayName),children:(0,h.jsx)("div",{className:"overflow-hidden rounded-full w-[44px] h-[44px] mr-3",children:(0,h.jsx)("img",{alt:"userPhoto",src:"".concat(t.imageUrl?t.imageUrl:"/instagram-app/images/standart-profile.png"),className:"w-full h-full object-cover"})})}),(0,h.jsxs)("div",{className:"w-full flex",children:[(0,h.jsx)(n.rU,{to:"/".concat(t.displayName),children:(0,h.jsx)("p",{className:"font-semibold text-sm mr-2",children:t.displayName})}),(0,h.jsx)("p",{className:"text-sm mr-1",children:"commented: "}),(0,h.jsx)("p",{className:"text-sm mr-1 max-w-[60px]",children:t.text}),(0,h.jsx)("p",{className:"text-sm text-gray-500/70",children:r})]}),(0,h.jsx)("div",{className:"min-w-[40px] h-[40px]",children:(0,h.jsx)(n.rU,{to:"/".concat(s.displayName,"/").concat(t.post.uid),children:(0,h.jsx)("img",{alt:"postPhoto",src:t.post.imageUrl,className:"object-cover w-[40px] h-[40px]"})})})]})},de=r.memo(me),xe=s(7934),pe=s(795),fe=function(e){var t=e.activity,s=(0,r.useState)(!1),a=(0,o.Z)(s,2),i=a[0],l=a[1],c=t.displayName,u=t.name,m=t.uid,d=t.imageUrl,x=(0,p.v9)((function(e){return e.userReducer.user})),f=(0,pe.Z)({displayName:c,uid:m,imageUrl:d,name:u}).hendleFollow,g=x.following&&x.following.find((function(e){return e.displayName===c})),j="Now";return j="Now"===(j=(0,ce.Z)(t.createdAt).split(" "))[1]?"Now":j[0]+j[1][0],(0,h.jsxs)("div",{className:"flex items-center my-3",children:[(0,h.jsx)(n.rU,{to:"/".concat(t.displayName),children:(0,h.jsx)("div",{className:"overflow-hidden rounded-full w-[44px] h-[44px] mr-3",children:(0,h.jsx)("img",{alt:"userPhoto",src:"".concat(t.imageUrl?t.imageUrl:"/instagram-app/images/standart-profile.png"),className:"w-full h-full object-cover"})})}),(0,h.jsxs)("div",{className:"w-full flex",children:[(0,h.jsx)(n.rU,{to:"/".concat(t.displayName),children:(0,h.jsx)("p",{className:"font-semibold text-sm mr-2",children:t.displayName})}),(0,h.jsx)("p",{className:"text-sm mr-1",children:"started following you."}),(0,h.jsx)("p",{className:"text-sm text-gray-500/70",children:j})]}),g?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("button",{type:"button",onClick:function(){return l(!0)},className:"active:opacity-60 text-sm font-semibold border px-3.5 py-1",children:"Following"}),(0,h.jsx)(z.Z,{activeModal:i,setActiveModal:l,styleForContainerBlock:"fixed w-screen h-screen top-0 left-0 right-0 flex justify-center items-center z-10 cursor-default bg-black/60 duration-300",children:(0,h.jsx)(xe.Z,{activeModal:i,imageUrl:d,displayName:c,name:u,uid:m,setActiveModal:l})})]}):(0,h.jsx)("button",{type:"button",onClick:function(){return f()},className:"active:opacity-60 text-white text-sm px-6 py-1.5 bg-[#0195f6] rounded font-semibold",children:"Follow"})]})},he=r.memo(fe),ge=function(e){var t=e.activity;return(0,h.jsxs)(h.Fragment,{children:["like"===t.type&&(0,h.jsx)(ue,{activity:t}),"comment"===t.type&&(0,h.jsx)(de,{activity:t}),"follower"===t.type&&(0,h.jsx)(he,{activity:t})]})},je=r.memo(ge),ve=function(e){var t=e.dropMenuHeart,s=e.setDropMenuHeart,n=(0,r.useState)([]),a=(0,o.Z)(n,2),u=a[0],d=a[1],x=(0,r.useState)(!1),f=(0,o.Z)(x,2),g=f[0],w=f[1],N=(0,p.v9)((function(e){return e.userReducer.user}));(0,r.useEffect)((function(){w(!0);var e=function(){var e=(0,c.Z)(m().mark((function e(){var t,s,r,n,a,c,o;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,U.JU)(k.db,"users",N.uid),e.next=3,(0,U.QT)(t);case 3:s=e.sent,r=s.data(),n=[],a=r.followers.map((function(e){return(0,l.Z)((0,l.Z)({},e),{},{type:"follower"})})),c=[],r.posts.forEach((function(e){var t=e.likes.filter((function(e){return e.uid!==N.uid})).map((function(t){return(0,l.Z)((0,l.Z)({},t),{},{type:"like",user:(0,l.Z)({},e.user),post:{uid:e.uid,imageUrl:e.image}})})),s=e.comments.filter((function(e){return e.userUid!==N.uid})).map((function(t){return(0,l.Z)((0,l.Z)({},t),{},{type:"comment",likes:(0,l.Z)({},t.likes),user:(0,l.Z)({},e.user),post:{uid:e.uid,imageUrl:e.image}})}));n.push.apply(n,(0,i.Z)(t)),c.push.apply(c,(0,i.Z)(s))})),o=[].concat(n,(0,i.Z)(a),c).sort((function(e,t){return t.createdAt-e.createdAt})),d(o),w(!1);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t]),console.log(1);var y=(0,r.useMemo)((function(){return u.map((function(e,t){return(0,h.jsx)(je,{activity:e},t)}))}),[u]);return(0,h.jsx)(j,{styleForWindowBlock:"w-full h-full fixed top-0 left-0 flex justify-center items-center z-20 cursor-default ",styleForContainerBlock:"absolute w-[22rem] sm:w-[32rem] h-[18rem] shadow-defaultModal rounded bg-white flex items-center top-10 -right-10 p-0 m-0 z-30 cursor-pointer",styleForInnerBlock:"flex items-center flex-col w-full h-full",dropMenuProfile:t,setDropMenuProfile:s,children:u.length>0?(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("ul",{className:"flex flex-col p-4 overflow-y-auto w-full",children:[(0,h.jsx)("p",{className:"font-semibold w-full text-sm",children:"Your activities"}),g?(0,h.jsx)("div",{className:"mt-3",children:(0,h.jsx)(v.Z,{height:30,width:30})}):y]})}):(0,h.jsxs)("div",{className:"flex items-center justify-center flex-col h-full",children:[(0,h.jsxs)("div",{className:"relative",children:[(0,h.jsx)("img",{alt:"circle",src:"/instagram-app/images/circle-contor.png",className:"h-14 w-14"}),(0,h.jsx)("img",{alt:"heart",src:"/instagram-app/images/heart-uncolored.png",className:"h-7 w-7 absolute top-3.5 left-3.5"})]}),(0,h.jsx)("p",{className:"text-sm mt-3",children:"Activity On Your Posts"}),(0,h.jsx)("p",{className:"text-sm max-w-[420px] text-center mt-3 px-3",children:"When someone likes or comments on one of your posts, you'll see it here."})]})})},we=r.memo(ve),Ne=function(){var e=(0,r.useContext)(B._).firestoreCurrentUser,t=(0,p.v9)((function(e){return e.userReducer.user})),s=(0,x.TH)(),i=(0,r.useState)(!1),l=(0,o.Z)(i,2),c=l[0],u=l[1],m=(0,r.useState)(!1),d=(0,o.Z)(m,2),g=d[0],j=d[1],v=(0,r.useState)(!1),w=(0,o.Z)(v,2),N=w[0],y=w[1],b=(0,p.I0)();(0,r.useEffect)((function(){b((0,f.a)(e))}),[e]);var U=function(){y((function(e){return!e}))},k=c||g||N;return(0,h.jsxs)("div",{className:"flex justify-between items-center",children:[(0,h.jsx)("div",{className:"xs:mr-6 mr-3 cursor-pointer xs:h-6 xs:w-6 h-5 w-5",children:(0,h.jsx)(n.rU,{to:a.Sd,children:(0,h.jsx)("img",{"data-name":"home",src:"/instagram-app"+"/images/home-".concat("/"!==s.pathname||k?"un":"","colored.png"),alt:"home",className:"xs:h-6 xs:w-6 h-5 w-5"})})}),(0,h.jsx)("div",{className:"xs:mr-6 mr-3 cursor-pointer xs:h-6 xs:w-6 h-5 w-5",children:(0,h.jsx)(n.rU,{to:"".concat(a.qd),children:(0,h.jsx)("img",{"data-name":"messenger",src:"/instagram-app"+"/images/messenger-".concat(s.pathname.includes(a.qd)&&!k?"":"un","colored.png"),alt:"messenger",className:"xs:h-6 xs:w-6 h-5 w-5"})})}),(0,h.jsxs)("div",{className:"xs:mr-6 mr-3 cursor-pointer xs:h-6 xs:w-6 h-5 w-5",onClick:U,children:[(0,h.jsx)("img",{"data-name":"add",src:"/instagram-app"+"/images/add-".concat(N?"":"un","colored.png"),alt:"add",className:"xs:h-6 xs:w-6 h-5 w-5"}),(0,h.jsx)(ee,{activeModal:N,setActiveModal:U})]}),(0,h.jsx)("div",{className:"xs:mr-6 mr-3 cursor-pointer xs:h-6 xs:w-6 h-5 w-5",children:(0,h.jsx)(n.rU,{to:a.Lo,children:(0,h.jsx)("img",{"data-name":"compass",src:"/instagram-app"+"/images/compass-".concat(s.pathname!==a.Lo||k?"un":"","colored.png"),alt:"compass",className:"xs:h-6 xs:w-6 h-5 w-5"})})}),(0,h.jsxs)("div",{className:"xs:mr-6 mr-3 cursor-pointer xs:h-6 xs:w-6 h-5 w-5 relative",children:[(0,h.jsx)("img",{"data-name":"heart",src:"/instagram-app"+"/images/heart-".concat(g?"":"un","colored.png"),alt:"heart",className:"xs:h-6 xs:w-6 h-5 w-5",onClick:function(){j(!0)}}),(0,h.jsx)(we,{dropMenuHeart:g,setDropMenuHeart:j})]}),(0,h.jsxs)("div",{className:"xs:mr-6 mr-3 cursor-pointer box-border relative ",children:[(0,h.jsx)("button",{className:"rounded-full overflow-hidden mt-1 border p-0.5 xs:h-[1.9rem] xs:w-[1.9rem] h-[1.55rem] w-[1.55rem]\n                ".concat(!(s.pathname==="/"+t.displayName||c||s.pathname.includes("saved")||s.pathname.includes("tagged")&&s.pathname.includes(t.displayName))||g||N?"border-transparent":"border-black"),"data-name":"profile",onClick:function(){u(!0)},children:(0,h.jsx)("img",{src:t.imageUrl?t.imageUrl:"/instagram-app/images/standart-profile.png",className:"w-full h-full object-cover overflow-hidden rounded-full ",alt:"profile"})}),(0,h.jsx)(le,{dropMenuProfile:c,setDropMenuProfile:u})]})]})},ye=r.memo(Ne),be=function(){var e=(0,Q.Z)();return console.log(e),(0,h.jsx)("header",{className:"h-16 border-b flex justify-center bg-white sticky top-0 w-full z-10 ",children:(0,h.jsx)("div",{className:"container max-w-5xl mt-3 relative pl-5 ",children:(0,h.jsxs)("div",{className:"flex justify-between items-center",children:[(0,h.jsx)("div",{className:"max-w-[33%] w-full",children:(0,h.jsx)(n.rU,{to:a.Sd,children:(0,h.jsx)("img",{src:"/instagram-app/images/instagram.png",alt:"instagram",className:"h-10"})})}),e.innerWidth>900?(0,h.jsx)("div",{className:"max-w-[33%] w-full h-9",children:(0,h.jsx)(F,{})}):null,k.I8.currentUser?(0,h.jsx)(ye,{}):(0,h.jsx)(R,{})]})})})},Ue=r.memo(be)},1457:function(e,t,s){var r=s(5861),n=s(7757),a=s.n(n),i=(s(2791),s(3934)),l=s(6030),c=s(289),o=s(4592),u=s(6871),m=s(184);t.Z=function(e){var t=e.activeModal,s=e.setActiveModal,n=(0,l.v9)((function(e){return e.userReducer.user})),d=(0,u.s0)(),x=function(){var e=(0,r.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.w7)(o.I8);case 2:d("/sign-in");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,m.jsxs)(i.Z,{activeModal:t,setActiveModal:s,textTitle:"Switch accounts",styleBlock:"bg-white w-[400px] rounded-xl duration-300",children:[(0,m.jsxs)("div",{className:"flex flex-row px-5 py-3 justify-between items-center border-b ",children:[(0,m.jsxs)("div",{className:"flex items-center",children:[(0,m.jsx)("img",{className:"w-[56px] h-[56px] rounded-full object-cover mr-3",alt:"userPhoto",src:n.imageUrl?n.imageUrl:"/instagram-app/images/standart-profile.png"}),(0,m.jsx)("p",{className:"font-semibold text-sm",children:n.displayName})]}),(0,m.jsxs)("div",{className:"relative",children:[(0,m.jsx)("img",{src:"/instagram-app/images/circle-full-blue-icon.png",className:"h-6 w-6 ml-5"}),(0,m.jsx)("img",{src:"/instagram-app/images/check-white-icon.png",className:"absolute h-5 w-5 top-0.5 right-0.5"})]})]}),(0,m.jsx)("div",{className:"flex justify-center",children:(0,m.jsx)("button",{className:"text-sm text-[#0195f6] h-[50px] font-semibold",type:"button",onClick:x,children:"Log into an Existing Account"})})]})}}}]);
//# sourceMappingURL=229.ad8fedcc.chunk.js.map