"use strict";(self.webpackChunkinstagram=self.webpackChunkinstagram||[]).push([[44],{6495:function(e,t,n){var s=n(5861),r=n(885),a=n(7757),i=n.n(a),c=n(2791),l=n(6030),o=n(9062),u=n(4592);t.Z=function(){var e=(0,l.v9)((function(e){return e.userReducer.user})),t=(0,c.useState)(),n=(0,r.Z)(t,2),a=(n[0],n[1]),d=function(){var t=(0,s.Z)(i().mark((function t(){var n,s;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=(0,o.JU)(u.db,"users",e.uid),t.next=3,(0,o.QT)(n);case 3:s=t.sent,a(s.data());case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),m=function(){var t=(0,s.Z)(i().mark((function t(n){var s,r,a,c;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d();case 2:return s=(0,o.hJ)(u.db,"users"),t.next=5,(0,o.PL)(s);case 5:return r=t.sent,console.log(r.docs),a=r.docs.map((function(e){return e.data()})),c=a.filter((function(t){return t.uid!==e.uid&&e.following.every((function(e){return e.uid!==t.uid}))})).slice(0,n).sort((function(){return.5-Math.random()})),t.abrupt("return",c);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return{fetchUsers:m}}},7044:function(e,t,n){n.r(t),n.d(t,{default:function(){return D}});var s=n(2982),r=n(5861),a=n(885),i=n(7757),c=n.n(i),l=n(2791),o=n(4229),u=n(6871),d=n(6030),m=n(8854),f=n(528),x=n(1413),p=n(6495),h=n(3504),j=n(795),v=n(7934),g=n(4177),w=n(184),N=function(e){var t=e.displayName,n=e.name,s=e.uid,r=e.imageUrl,i=(0,l.useState)(!1),c=(0,a.Z)(i,2),o=c[0],u=c[1],m=(0,j.Z)({displayName:t,uid:s,imageUrl:r,name:n}).hendleFollow,x=(0,d.v9)((function(e){return e.userReducer.user})),p=x.following&&x.following.find((function(e){return e.displayName===t}));return(0,w.jsxs)("div",{className:"flex justify-between items-center w-full my-2",children:[(0,w.jsx)(h.rU,{to:f.Sd+t,children:(0,w.jsx)("div",{className:"rounded-full w-[32px] mr-3",children:(0,w.jsx)("img",{alt:"userImage",src:"".concat(r||"/instagram-app/images/standart-profile.png"),className:"h-[32px] object-cover"})})}),(0,w.jsxs)("div",{className:"flex flex-col w-full",children:[(0,w.jsx)(h.rU,{to:f.Sd+t,children:(0,w.jsx)("p",{className:"text-sm font-semibold ",children:t})}),(0,w.jsx)("p",{className:"text-[10px] text-gray-500/80 tracking-wide",children:"Suggested for you"})]}),p?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("button",{type:"button",onClick:function(){return u(!0)},className:"active:opacity-60 text-xs font-semibold px-3",children:"Following"}),(0,w.jsx)(g.Z,{activeModal:o,setActiveModal:u,styleForContainerBlock:"fixed w-screen h-screen top-0 left-0 right-0 flex justify-center items-center z-10 cursor-default bg-black/60 duration-300",children:(0,w.jsx)(v.Z,{activeModal:o,imageUrl:r,displayName:t,name:n,uid:s,setActiveModal:u})})]}):(0,w.jsx)("button",{type:"button",onClick:function(){return m()},className:"active:opacity-60 text-xs text-[#0195f6] font-semibold px-3",children:"Follow"})]})},y=l.memo(N),b=n(6839),Z=function(){return(0,w.jsxs)("div",{className:"flex items-center my-2 h-[35px]",children:[(0,w.jsx)("div",{children:(0,w.jsx)(b.Z,{circle:!0,width:32,height:32})}),(0,w.jsx)("div",{className:"w-full h-full",children:(0,w.jsx)(b.Z,{width:100,height:6,count:2,containerClassName:"flex flex-col mt-2.5 ml-3",className:"mb-2"})}),(0,w.jsx)("div",{className:"h-full",children:(0,w.jsx)(b.Z,{height:8,width:40,className:"mr-3 mt-2"})})]})},k=l.memo(Z),C=n(1457),S=(n(5862),function(){var e=(0,p.Z)().fetchUsers,t=(0,l.useState)([]),n=(0,a.Z)(t,2),s=n[0],i=n[1],o=(0,l.useState)(!1),m=(0,a.Z)(o,2),f=m[0],h=m[1],j=(0,d.v9)((function(e){return e.userReducer.user})),v=(0,l.useState)(!1),g=(0,a.Z)(v,2),N=g[0],b=g[1],Z=(0,u.s0)();(0,l.useEffect)((function(){b(!0);var t=function(){var t=(0,r.Z)(c().mark((function t(){var n;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(5);case 2:n=t.sent,i(n),b(!1);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[]);var S=Array(5).fill(0).map((function(e,t){return(0,w.jsx)(k,{},t)})),U=(0,l.useMemo)((function(){return s.map((function(e){return(0,w.jsx)(y,(0,x.Z)({},e),e.uid)}))}),[s]);return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("aside",{className:"max-w-[330px] w-full mt-5",children:(0,w.jsxs)("div",{className:"w-full",children:[(0,w.jsxs)("div",{className:"w-full flex justify-between items-center",children:[(0,w.jsx)("div",{className:"rounded-full min-w-[56px] mr-4 overflow-hidden",children:(0,w.jsx)("img",{alt:"userPhoto",src:"".concat(j.imageUrl?j.imageUrl:"/instagram-app/images/standart-profile.png"),className:"h-[56px] w-[56px] object-cover"})}),(0,w.jsxs)("div",{className:"flex flex-col w-full",children:[(0,w.jsx)("p",{className:"font-semibold text-sm",children:j.displayName}),(0,w.jsx)("p",{className:"text-sm text-gray-500/70",children:j.name})]}),(0,w.jsx)("button",{onClick:function(){return h(!0)},type:"button",className:"text-xs font-semibold text-[#0195f6]",children:"Switch"})]}),(0,w.jsxs)("div",{className:"flex justify-between mt-4",children:[(0,w.jsx)("p",{className:"text-gray-500 font-semibold text-sm ",children:"Suggestions For You"}),(0,w.jsx)("button",{className:"text-xs",type:"button",onClick:function(){return Z("/people")},children:"See All"})]}),(0,w.jsx)("div",{className:"flex flex-col mt-3",children:N?S:U}),(0,w.jsx)("p",{className:"text-gray-500/70 text-xs mt-5",children:"\xa9 2022 INSTAGRAN FROM META"})]})}),(0,w.jsx)(C.Z,{activeModal:f,setActiveModal:h})]})}),U=l.memo(S),P=n(2987),M=n(5317),F=n(6832),E=n(3582),A=n(9536),R=n(1485),O=n(5298),T=function(e){var t=e.post,n=e.updatedCurrentPost,s=e.setUpdatedCurrentPost,r=(0,l.useState)(!1),i=(0,a.Z)(r,2),c=i[0],o=i[1];return(0,l.useEffect)((function(){n&&o(!0)}),[n]),(0,w.jsxs)("div",{className:"flex flex-row px-3 mt-2 w-full",children:[(0,w.jsx)("p",{style:{wordWrap:"break-word"},className:"text-sm font-semibold mr-2 hover:underline",children:(0,w.jsx)(h.rU,{to:"".concat(f.Sd).concat(t.user.displayName),children:t.user.displayName})}),(0,w.jsx)("p",{className:"text-sm w-full",children:t.comments[t.comments.length-1].text}),c&&(0,w.jsx)(O.Z,{postComment:t.comments[t.comments.length-1],updatedCurrentPost:n&&n,setUpdatedCurrentPost:s})]})},I=l.memo(T),J=function(e){var t,n=e.post,s=(0,l.useState)(n),r=(0,a.Z)(s,2),i=r[0],c=r[1],o=(0,l.useState)(!1),d=(0,a.Z)(o,2),m=d[0],x=d[1],p=(0,l.useState)(!1),j=(0,a.Z)(p,2),v=j[0],g=j[1],N=(0,l.useState)(""),y=(0,a.Z)(N,2),b=y[0],Z=y[1],k=(0,l.useState)([]),C=(0,a.Z)(k,2),S=C[0],U=C[1],O=(0,l.useRef)(null),T=(0,u.TH)().pathname.split("/").includes("saved"),J=(0,u.s0)(),Q=(0,R.Z)(n.uid).split(" ");1==Number(Q[0])?(Q[1]=Q[1].split("").slice(0,-1).join(""),Q=Q.join(" ")):Q=Q.join(" ");(0,l.useEffect)((function(){U(i.comments)}),[i]);return(0,w.jsxs)("div",{className:"flex flex-col max-w-[470px] w-full rounded-md bg-white my-2 border",children:[(0,w.jsxs)("div",{className:"w-full flex p-3 items-center",children:[(0,w.jsx)(h.rU,{to:f.Sd+n.user.displayName,children:(0,w.jsx)("div",{className:"rounded-full h-[32px] w-[32px] mr-3 overflow-hidden",children:(0,w.jsx)("img",{alt:"userPhoto",src:n.user.imageUrl?n.user.imageUrl:"/instagram-app/images/standart-profile.png",className:"h-[32px] object-cover"})})}),(0,w.jsx)("div",{children:(0,w.jsx)(h.rU,{to:f.Sd+n.user.displayName,children:(0,w.jsx)("p",{className:"text-sm font-semibold",children:null===(t=n.user)||void 0===t?void 0:t.displayName})})})]}),(0,w.jsx)("div",{className:"w-full min-h-[470px] max-h-[600px] bg-black flex items-center",children:(0,w.jsx)("img",{className:"w-full min-h-[470px] max-h-[600px] object-contain",alt:"postPhoto",src:n.image})}),(0,w.jsxs)("div",{className:"flex justify-between p-3",children:[(0,w.jsxs)("div",{className:"flex items-center",children:[(0,w.jsx)(P.Z,{updatedCurrentPost:i,setUpdatedCurrentPost:c}),(0,w.jsx)("img",{alt:"comment",src:"/instagram-app/images/comment-icon.png",className:"h-[22px] w-[22px] mr-5 cursor-pointer hover:opacity-50",onClick:function(){return O.current.focus()}}),(0,w.jsx)(M.Z,{updatedCurrentPost:i})]}),(0,w.jsx)("div",{children:(0,w.jsx)(F.Z,{updatedCurrentPost:i,currentPost:n})})]}),i.likes&&i.likes.length>0?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("p",{type:"button",className:"font-semibold text-sm border-none m-0 px-3 cursor-pointer",onClick:function(){return x(!0)},children:[i.likes&&i.likes.length," like"]}),(0,w.jsx)(E.Z,{activeModal:m,setActiveModal:x,likes:i.likes&&i.likes})]}):(0,w.jsxs)("p",{className:"text-sm px-3",children:["Be the first to ",(0,w.jsx)("span",{className:"font-semibold text-sm",children:"like this"})]}),n.text.length>0&&(0,w.jsxs)("div",{className:"flex flex-row px-3 mt-2",children:[(0,w.jsx)("p",{className:"text-sm font-semibold mr-2 hover:underline",children:(0,w.jsx)(h.rU,{to:"".concat(n.user.displayName),children:n.user.displayName})}),(0,w.jsx)("p",{className:"text-sm",children:n.text})]}),1===S.length&&0!==S.length?(0,w.jsx)(I,{post:i&&i,updatedCurrentPost:i&&i,setUpdatedCurrentPost:c}):S.length>1&&(0,w.jsxs)("div",{className:"mt-2",children:[(0,w.jsx)("button",{type:"button",onClick:function(){J("dashboard/".concat(i.user.displayName,"/").concat(i.uid))},children:(0,w.jsxs)("p",{className:"text-sm text-gray-500/70 mx-3",children:["View all ",i.comments.length," comments"]})}),(0,w.jsx)(I,{post:i&&i,updatedCurrentPost:i&&i,setUpdatedCurrentPost:c})]}),(0,w.jsxs)("p",{className:"text-[10px] mt-2 text-black/60 px-3 mb-3",children:[Q.toUpperCase()," "," now"===Q.toLowerCase()?"":" AGO"]}),(0,w.jsx)("div",{className:"w-full px-3 border-t",children:(0,w.jsx)(A.Z,{textComment:b,setTextComment:Z,setShowPicker:g,showPicker:v,commentRef:O,updatedCurrentPost:i,isCurrentPostSaved:!!T,setUpdatedCurrentPost:c,pickerStyle:{width:"310px",position:"absolute",top:"-320px",left:"-12px",zIndex:"21"}})})]})},Q=l.memo(J),z=n(9617),B=n(4592),G=n(9062),H=function(){var e=(0,d.v9)((function(e){return e.userReducer.user})),t=(0,l.useState)([]),n=(0,a.Z)(t,2),i=n[0],o=n[1],m=(0,l.useState)(!1),f=(0,a.Z)(m,2),x=f[0],p=f[1];(0,l.useEffect)((function(){var t=function(){var t=(0,r.Z)(c().mark((function t(){var n;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p(!0),n=function(){var t=(0,r.Z)(c().mark((function t(){var n,a;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=(0,G.JU)(B.db,"users",e.uid),t.next=3,(0,G.QT)(n);case 3:a=t.sent,a.data().following.forEach(function(){var e=(0,r.Z)(c().mark((function e(t){var n,r,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,G.JU)(B.db,"users",t.uid),e.next=3,(0,G.QT)(n);case 3:r=e.sent,a=r.data(),o((function(e){return[].concat((0,s.Z)(e),(0,s.Z)(a.posts))}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=4,n();case 4:p(!1);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[]);var h=(0,l.useMemo)((function(){return i.sort((function(e,t){return t.uid-e.uid})).map((function(e){return(0,w.jsx)(Q,{post:e},e.uid)}))}),[i]);return(0,w.jsx)(w.Fragment,{children:x?(0,w.jsx)("div",{className:"w-[470px] mr-10 h-full flex items-center justify-center h-[calc(100vh-65px)]",children:(0,w.jsx)(z.Z,{height:70,width:70})}):(0,w.jsx)("section",{className:"max-w-[470px] w-full md:mr-10",children:(0,w.jsx)("div",{className:"w-full",children:(0,w.jsxs)("ul",{className:"flex flex-col",children:[h,(0,w.jsx)(u.j3,{context:{posts:i}})]})})})})},L=l.memo(H),W=n(749),Y=function(){var e=(0,W.Z)();return(0,w.jsxs)("div",{className:"flex justify-center mt-7 px-3",children:[(0,w.jsx)(L,{}),e.innerWidth>768?(0,w.jsx)(U,{}):null]})},V=l.memo(Y),q=function(){var e=(0,l.useState)([]),t=(0,a.Z)(e,2),n=(t[0],t[1]),i=(0,d.v9)((function(e){return e.userReducer.user})),x=(0,l.useState)(!1),p=(0,a.Z)(x,2),h=p[0],j=p[1];return console.log(i),(0,l.useEffect)((function(){if(B.I8.currentUser){n([]);i.following.forEach(function(){var e=(0,r.Z)(c().mark((function e(t){var r,a,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,G.JU)(B.db,"users",t.uid),e.next=3,(0,G.QT)(r);case 3:a=e.sent,i=a.data(),n((function(e){return[].concat((0,s.Z)(e),(0,s.Z)(i.posts))}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),i.following.length||j(!0)}}),[]),(0,w.jsxs)("div",{className:"bg-[#fafafa]",children:[!B.I8.currentUser&&(0,w.jsx)(u.Fg,{to:f.H4}),(0,w.jsx)(o.Z,{}),h?(0,w.jsx)(m.Z,{}):(0,w.jsx)("main",{role:"main",children:(0,w.jsx)(V,{})})]})},D=l.memo(q)},8854:function(e,t,n){n.d(t,{Z:function(){return y}});var s=n(2791),r=n(1413),a=n(5861),i=n(885),c=n(7757),l=n.n(c),o=n(3504),u=n(528),d=n(6030),m=n(795),f=n(7934),x=n(4177),p=n(184),h=function(e){var t=e.displayName,n=e.uid,r=e.imageUrl,a=e.name,c=(0,s.useState)(!1),l=(0,i.Z)(c,2),h=l[0],j=l[1],v=(0,m.Z)({displayName:t,uid:n,imageUrl:r,name:a}).hendleFollow,g=(0,d.v9)((function(e){return e.userReducer.user})),w=g.following&&g.following.find((function(e){return e.displayName===t}));return(0,p.jsxs)("div",{className:"flex justify-between items-center w-full px-5 py-1.5",children:[(0,p.jsx)(o.rU,{to:u.Sd+t,children:(0,p.jsx)("div",{className:"rounded-full w-[44px] mr-4 overflow-hidden",children:(0,p.jsx)("img",{alt:"userImage",src:"".concat(r||"/instagram-app/images/standart-profile.png"),className:"h-[44px] object-cover"})})}),(0,p.jsxs)("div",{className:"flex flex-col w-full",children:[(0,p.jsx)(o.rU,{to:u.Sd+t,children:(0,p.jsx)("p",{className:"text-sm font-semibold ",children:t})}),(0,p.jsx)("p",{className:"text-sm text-gray-500/80",children:a}),(0,p.jsx)("p",{className:"text-[10px] text-gray-500/80",children:"Suggested for you"})]}),w?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("button",{type:"button",onClick:function(){return j(!0)},className:"active:opacity-60 text-sm font-semibold border px-3.5 py-1",children:"Following"}),(0,p.jsx)(x.Z,{activeModal:h,setActiveModal:j,styleForContainerBlock:"fixed w-screen h-screen top-0 left-0 right-0 flex justify-center items-center z-10 cursor-default bg-black/60 duration-300",children:(0,p.jsx)(f.Z,{activeModal:h,imageUrl:r,displayName:t,name:a,uid:n,setActiveModal:j})})]}):(0,p.jsx)("button",{type:"button",onClick:function(){return v()},className:"active:opacity-60 text-white text-sm px-6 py-1.5 bg-[#0195f6] rounded font-semibold",children:"Follow"})]})},j=s.memo(h),v=n(6495),g=function(){var e=(0,s.useState)([]),t=(0,i.Z)(e,2),n=t[0],c=t[1],o=(0,v.Z)().fetchUsers;(0,s.useEffect)((function(){var e=function(){var e=(0,a.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(35);case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var u=(0,s.useMemo)((function(){return n.map((function(e){return(0,p.jsx)(j,(0,r.Z)({},e),e.uid)}))}),[n]);return(0,p.jsx)("div",{className:"max-w-[600px] w-full bg-whiteflex flex-col items-center border mt-3 py-3 rounded",children:u})},w=s.memo(g),N=function(){return(0,p.jsxs)("section",{className:"flex flex-col items-center px-2",children:[(0,p.jsx)("div",{className:"max-w-[600px] w-full mt-5",children:(0,p.jsx)("p",{className:"font-semibold",children:"Suggestions For You"})}),(0,p.jsx)(w,{})]})},y=s.memo(N)},5862:function(){},6839:function(e,t,n){n.d(t,{Z:function(){return o}});var s=n(885),r=n(1413);function a(e,t){if(null==e)return{};var n,s,r=function(e,t){if(null==e)return{};var n,s,r={},a=Object.keys(e);for(s=0;s<a.length;s++)n=a[s],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)n=a[s],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var i=n(2791),c=["count","wrapper","className","containerClassName","containerTestId","circle","style"],l=i.createContext({});function o(e){for(var t,n,o,u=e.count,d=void 0===u?1:u,m=e.wrapper,f=e.className,x=e.containerClassName,p=e.containerTestId,h=e.circle,j=void 0!==h&&h,v=e.style,g=a(e,c),w=i.useContext(l),N=(0,r.Z)({},g),y=0,b=Object.entries(g);y<b.length;y++){var Z=(0,s.Z)(b[y],2),k=Z[0];"undefined"===typeof Z[1]&&delete N[k]}var C=(0,r.Z)((0,r.Z)((0,r.Z)({},w),N),{},{circle:j}),S=(0,r.Z)((0,r.Z)({},v),function(e){var t=e.baseColor,n=e.highlightColor,s=e.width,r=e.height,a=e.borderRadius,i=e.circle,c=e.direction,l=e.duration,o=e.enableAnimation,u=void 0===o||o,d={};return"rtl"===c&&(d["--animation-direction"]="reverse"),"number"===typeof l&&(d["--animation-duration"]="".concat(l,"s")),u||(d["--pseudo-element-display"]="none"),"string"!==typeof s&&"number"!==typeof s||(d.width=s),"string"!==typeof r&&"number"!==typeof r||(d.height=r),"string"!==typeof a&&"number"!==typeof a||(d.borderRadius=a),i&&(d.borderRadius="50%"),"undefined"!==typeof t&&(d["--base-color"]=t),"undefined"!==typeof n&&(d["--highlight-color"]=n),d}(C)),U="react-loading-skeleton";f&&(U+=" ".concat(f));for(var P=null!==(t=C.inline)&&void 0!==t&&t,M=[],F=Math.ceil(d),E=0;E<F;E++){var A=S;if(F>d&&E===F-1){var R=null!==(n=A.width)&&void 0!==n?n:"100%",O=d%1,T="number"===typeof R?R*O:"calc(".concat(R," * ").concat(O,")");A=(0,r.Z)((0,r.Z)({},A),{},{width:T})}var I=i.createElement("span",{className:U,style:A,key:E},"\u200c");P?M.push(I):M.push(i.createElement(i.Fragment,{key:E},I,i.createElement("br",null)))}return i.createElement("span",{className:x,"data-testid":p,"aria-live":"polite","aria-busy":null===(o=C.enableAnimation)||void 0===o||o},m?M.map((function(e,t){return i.createElement(m,{key:t},e)})):M)}}}]);
//# sourceMappingURL=44.23373683.chunk.js.map