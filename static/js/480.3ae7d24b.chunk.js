"use strict";(self.webpackChunkinstagram=self.webpackChunkinstagram||[]).push([[480],{8480:function(e,t,s){s.d(t,{Z:function(){return we}});var r=s(2791),n=s(3504),a=s(5304),i=s(528),l=s(2982),c=s(1413),o=s(5861),u=s(885),d=s(7757),m=s.n(d),x=s(184),f=function(e){var t=e.children,s=e.styleForContainerBlock,r=e.styleForInnerBlock,n=e.dropMenuProfile,a=e.setDropMenuProfile,i=e.styleForWindowBlock;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{onClick:function(){a(!1)},className:"".concat(i,"\n        ").concat(n?"block pointer-events-auto":"hidden pointer-events-none")}),(0,x.jsx)("div",{className:"".concat(s," duration-200 ").concat(n?"opacity-1 top-12 pointer-events-auto":"opacity-0 top-6 pointer-events-none"),onClick:function(e){return e.stopPropagation()},children:(0,x.jsx)("div",{className:r,children:t})})]})},p=r.memo(f),h=s(4117),g=s(6871),j=s(6030),v=s(3437),w=s(9617),N=function(e){var t=e.user,s=e.redirectToAnotherUser;return(0,x.jsx)("li",{className:"py-1.5 pl-4 hover:bg-gray-100/50 cursor-pointer",onClick:function(){return s(t)},children:(0,x.jsxs)("div",{className:"flex justify-between items-center",children:[(0,x.jsx)("div",{className:"w-[2.75rem] h-[2.75rem] rounded-full overflow-hidden mt-1",children:(0,x.jsx)("img",{className:"w-full h-full object-cover",src:"".concat(t.imageUrl?t.imageUrl:"/images/standart-profile.png"),alt:"UserPhoto"})}),(0,x.jsx)("div",{className:"w-[17.8rem] pr-5",children:(0,x.jsx)("p",{className:"font-semibold text-sm",children:t.displayName})})]})})},y=r.memo(N),b=function(e){var t=e.usersSuggestions,s=e.setActiveModal,n=e.activeModal,a=e.redirectToAnotherUser,i=e.isLoading,l=(0,r.useMemo)((function(){return t.map((function(e){return(0,x.jsx)(y,{user:e,redirectToAnotherUser:a},e.uid)}))}),[t]);return(0,x.jsx)(p,{styleForWindowBlock:"w-full h-full fixed top-0 left-0 flex justify-center items-center z-10 cursor-default ",dropMenuProfile:n,setDropMenuProfile:s,styleForContainerBlock:"absolute w-[23.4rem] h-[22.6rem] shadow-defaultModal rounded bg-white flex top-14 right-3 p-0 m-0 z-20",styleForInnerBlock:"flex flex-col w-full overflow-y-scroll",children:l.length>0?(0,x.jsx)("ul",{className:"pt-3",children:i?(0,x.jsx)("div",{className:"h-[340px]",children:(0,x.jsx)(w.Z,{height:30,width:30})}):l}):(0,x.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,x.jsx)("p",{className:"text-sm text-gray-400",children:"No results found."})})})},U=r.memo(b),k=function(e){var t=e.user,s=e.redirectToAnotherUser,n=(e.recentUsers,e.setRecentUsers),i=(0,j.v9)((function(e){return e.userReducer.user})),u=(0,j.I0)(),d=(0,r.useContext)(a._),f=d.doc,p=d.db,h=d.updateDoc,g=function(){var e=(0,o.Z)(m().mark((function e(t,s){var r,a;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.stopPropagation(),r=f(p,"users","".concat(i.uid)),a=i.recentVisitedUsers.filter((function(e){return e.uid!==t})),u((0,v.a)((0,c.Z)((0,c.Z)({},i),{},{recentVisitedUsers:(0,l.Z)(a)}))),n(a),e.next=7,h(r,{recentVisitedUsers:(0,l.Z)(a)});case 7:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}();return(0,x.jsx)("li",{className:"py-1.5 pl-4 hover:bg-gray-100/50 cursor-pointer",onClick:function(){return s(t)},children:(0,x.jsxs)("div",{className:"flex justify-left items-center",children:[(0,x.jsx)("div",{className:"w-[2.75rem] h-[2.75rem] rounded-full overflow-hidden mt-1 mr-3",children:(0,x.jsx)("img",{className:"w-full h-full object-cover",src:"".concat(t.imageUrl?t.imageUrl:"/images/standart-profile.png"),alt:"UserPhoto"})}),(0,x.jsx)("div",{className:"w-[15.5rem] pr-5",children:(0,x.jsx)("p",{className:"font-semibold text-sm",children:t.displayName})}),(0,x.jsx)("button",{type:"button",className:"p-1",onClick:function(e){return g(t.uid,e)},children:(0,x.jsx)("img",{alt:"close",src:"/images/close-icon.png",className:"w-3.5 h-3.5 opacity-60"})})]})})},Z=r.memo(k),M=function(e){var t=e.activeModal,s=e.setActiveModal,n=e.redirectToAnotherUser,i=(0,j.v9)((function(e){return e.userReducer.user})),l=(0,r.useState)([]),d=(0,u.Z)(l,2),f=d[0],h=d[1],g=(0,r.useState)(!1),N=(0,u.Z)(g,2),y=N[0],b=N[1],U=(0,j.I0)(),k=(0,r.useContext)(a._),M=k.db,P=k.doc,C=k.updateDoc,A=k.getDoc,S=function(){var e=(0,o.Z)(m().mark((function e(){var t;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=P(M,"users","".concat(i.uid)),U((0,v.a)((0,c.Z)((0,c.Z)({},i),{},{recentVisitedUsers:[]}))),h([]),e.next=5,C(t,{recentVisitedUsers:[]});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,r.useEffect)((function(){b(!0);var e=function(){var e=(0,o.Z)(m().mark((function e(){var t,s;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=P(M,"users",i.uid),e.next=3,A(t);case 3:s=e.sent,h(s.data().recentVisitedUsers),b(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var F=(0,r.useMemo)((function(){return f.map((function(e){return(0,x.jsx)(Z,{user:e,recentUsers:f,setRecentUsers:h,redirectToAnotherUser:n},e.uid)}),[f])}));return(0,x.jsxs)(p,{styleForWindowBlock:"w-full h-full fixed top-0 left-0 flex justify-center items-center z-10 cursor-default ",dropMenuProfile:t,setDropMenuProfile:s,styleForContainerBlock:"absolute w-[23.4rem] h-[22.6rem] shadow-defaultModal rounded bg-white flex top-14 right-3 p-0 m-0 z-20",styleForInnerBlock:"flex flex-col w-full overflow-y-scroll",children:[(0,x.jsxs)("div",{className:"flex justify-between pt-5 px-4",children:[(0,x.jsx)("p",{className:"font-semibold",children:"Recent"}),(0,x.jsx)("button",{type:"button",className:"text-sm font-semibold text-[#0195f6]",onClick:function(){return S()},children:"Clear all"})]}),(0,x.jsxs)("ul",{className:"pt-2",children:[y?(0,x.jsx)("div",{className:"h-[270px]",children:(0,x.jsx)(w.Z,{height:30,width:30})}):F,0===f.length&&!y&&(0,x.jsx)("p",{className:"text-sm p-4 font-semibold",children:"No recent searches."})]})]})},P=r.memo(M),C=function(){var e=(0,j.v9)((function(e){return e.userReducer.user})),t=(0,j.I0)(),s=(0,r.useRef)(null),n=(0,r.useContext)(a._),i=n.doc,d=n.db,f=n.updateDoc,p=(0,h.Z)().searchUsers,w=(0,r.useState)(""),N=(0,u.Z)(w,2),y=N[0],b=N[1],k=(0,r.useState)(!1),Z=(0,u.Z)(k,2),M=Z[0],C=Z[1],A=(0,r.useState)([]),S=(0,u.Z)(A,2),F=S[0],R=S[1],z=(0,r.useState)(!1),B=(0,u.Z)(z,2),D=B[0],L=B[1],T=(0,g.s0)();(0,r.useEffect)((function(){y.length>0&&C(!0)}),[y]);var E=function(){var e=(0,o.Z)(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(t.target.value),L(!0),e.t0=R,e.next=5,p(t.target.value);case 5:e.t1=e.sent,(0,e.t0)(e.t1),L(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var s=(0,o.Z)(m().mark((function s(r){var n,a,o,u,x;return m().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return n=r.displayName,a=r.imageUrl,o=r.uid,C(!1),T("/".concat(n)),u=i(d,"users","".concat(e.uid)),x=e.recentVisitedUsers.filter((function(e){return e.displayName!=n})),t((0,v.a)((0,c.Z)((0,c.Z)({},e),{},{recentVisitedUsers:[{displayName:n,imageUrl:a,uid:o}].concat((0,l.Z)(x))}))),s.next=8,f(u,{recentVisitedUsers:[{displayName:n,imageUrl:a,uid:o}].concat((0,l.Z)(x))});case 8:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}();return(0,x.jsxs)("div",{className:"relative",children:[(0,x.jsx)("div",{className:"absolute z-20",children:(0,x.jsx)("input",{placeholder:"Search",style:M?null:{paddingLeft:"40px"},className:"bg-[#8E8E8E]/10 font-light outline-none py-1.5 px-4 rounded-lg placeholder:text-gray-400 placeholder:font-light w-[16.7rem] ".concat(M?"text-black":"text-gray-400"),onFocus:function(){C(!0)},onChange:E,value:y,ref:s})}),y.length>0&&M?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"h-4 w-4 absolute top-2.5 right-20 opacity-20 cursor-pointer z-20",type:"button",onClick:function(e){b(""),R([]),s.current.focus()},children:(0,x.jsx)("img",{src:"/images/close-for-search.png"})}),(0,x.jsx)(U,{isLoading:D,usersSuggestions:F,activeModal:M,setActiveModal:C,redirectToAnotherUser:I})]}):0===y.length&&M?(0,x.jsx)(P,{activeModal:M,setActiveModal:C,redirectToAnotherUser:I}):!M&&(0,x.jsx)("div",{className:"h-3.5 w-3.5 absolute opacity-40 top-3 left-4",children:(0,x.jsx)("img",{src:"/images/zoom-for-search.png"})})]})},A=r.memo(C),S=function(){return(0,x.jsxs)("div",{className:"flex justify-between",children:[(0,x.jsx)(n.rU,{to:i.H4,children:(0,x.jsx)("button",{className:"py-1.5 px-3 bg-blue-500 text-white rounded text-sm font-bold mr-5",children:"Log in"})}),(0,x.jsx)(n.rU,{to:i._5,children:(0,x.jsx)("button",{className:"py-1.5 px-3  text-black rounded text-sm font-bold",children:"Sign up"})})]})},F=r.memo(S),R=s(4177),z=function(e){var t=e.post,s=e.setPost;return(0,x.jsx)("div",{className:"flex flex-col items-center justify-center w-full h-[calc(100%-50px)]",children:t.images[0]?(0,x.jsx)("img",{alt:"postphoto",src:URL.createObjectURL(t.images[0]),className:"w-full h-full object-contain rounded-b-xl bg-black"}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"w-20 h-20 mb-5",children:(0,x.jsx)("img",{src:"/images/multimedia-icon.png"})}),(0,x.jsx)("p",{className:"font-light text-2xl mb-5 cursor-text",children:"Drag photos and videos here"}),(0,x.jsx)("div",{children:(0,x.jsxs)("label",{className:"px-2.5 py-1.5 font-semibold text-white bg-[#0195f6] rounded text-sm cursor-pointer",children:["Select from computer",(0,x.jsx)("input",{type:"file",className:"hidden",onChange:function(e){return function(e){e.target.files&&s((function(t){return(0,c.Z)((0,c.Z)({},t),{},{images:[].concat((0,l.Z)(t.images),[e.target.files[0]])})}))}(e)}})]})})]})})},B=r.memo(z),D=function(e){var t=e.setPage,s=e.post,r=e.setPost;return(0,x.jsx)("div",{className:"border-b h-[50px]",children:s.images.length>0?(0,x.jsxs)("div",{className:"flex justify-between h-full items-center px-5",children:[(0,x.jsx)("button",{onClick:function(){r({images:[]})},children:(0,x.jsx)("img",{src:"/images/left-arrow-icon.png",className:"w-7 h-7",alt:"back"})}),(0,x.jsx)("p",{className:"font-semibold",children:"Crop"}),(0,x.jsx)("button",{onClick:function(){return t((function(e){return e+1}))},className:"text-sm font-semibold text-[#0195f6]",children:"Next"})]}):(0,x.jsx)("div",{className:"flex justify-center h-full items-center",children:(0,x.jsx)("p",{className:"py-3 font-semibold",children:"Create new post"})})})},L=r.memo(D),T=function(e){var t=e.activeModal,s=e.setActiveModal,r=e.setPage,n=e.setPost,a=e.post;return(0,x.jsx)(R.Z,{activeModal:t,setActiveModal:s,styleForContainerBlock:"fixed w-screen h-screen top-0 left-0 right-0 flex justify-center items-center z-20 cursor-default bg-black/60 duration-300",closeModal:function(){r(0),n({images:[]})},children:(0,x.jsxs)("div",{className:"mx-5 lg:max-w-[700px] max-w-[400px] w-full h-[80vh] bg-white rounded-xl duration-300 ".concat(t?"opacity-1 scale-100":"opacity-0 scale-50"),onClick:function(e){return e.stopPropagation()},children:[(0,x.jsx)(L,{post:a,setPost:n,setPage:r}),(0,x.jsx)(B,{post:a,setPost:n})]})})},E=r.memo(T),I=s(2539),V=function(e){var t=e.setPage,s=e.post,n=e.text,i=e.setActiveModal,d=e.setPost,f=(0,j.v9)((function(e){return e.userReducer.user})),p=(0,j.v9)((function(e){return e.currentProfileUserReducer.user})),h=(0,r.useState)(!1),N=(0,u.Z)(h,2),y=N[0],b=N[1],U=(0,r.useContext)(a._),k=U.storage,Z=U.db,M=U.updateDoc,P=U.ref,C=U.doc,A=U.uploadBytes,S=U.getDownloadURL,F=U.setFirestoreCurrentUser,R=(0,j.I0)(),z=(0,g.UO)().user,B=function(){var e=(0,o.Z)(m().mark((function e(){var r,a,o,u,x,h,g;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),r=f.displayName,a=f.uid,o=f.imageUrl,u="/images/".concat(f.uid,"/posts/").concat(s.images[0].name),x=P(k,u),e.next=6,A(x,s.images[0]);case 6:return e.next=8,S(x);case 8:return h=e.sent,g={image:h,text:n,comments:[],likes:[],uid:(new Date).getTime().toString(),user:{displayName:r,uid:a,imageUrl:o}},e.next=12,M(C(Z,"users",f.uid),{posts:[].concat((0,l.Z)(f.posts),[g])});case 12:R((0,v.a)((0,c.Z)((0,c.Z)({},f),{},{posts:[g].concat((0,l.Z)(f.posts))}))),F((0,c.Z)((0,c.Z)({},f),{},{posts:[g].concat((0,l.Z)(f.posts))})),z&&z!==f.displayName||!p.posts||R((0,I.l)((0,c.Z)((0,c.Z)({},p),{},{posts:[g].concat((0,l.Z)(p.posts))}))),t(0),d({images:[]}),b(!1),i(!1);case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("div",{className:"border-b h-[50px]",children:(0,x.jsxs)("div",{className:"flex justify-between h-full items-center px-5",children:[(0,x.jsx)("button",{onClick:function(){t((function(e){return e-1}))},children:(0,x.jsx)("img",{src:"/images/left-arrow-icon.png",className:"w-7 h-7",alt:"back"})}),(0,x.jsx)("p",{className:"font-semibold",children:"Create new post"}),(0,x.jsx)("button",{onClick:function(){return B()},type:"button",children:(0,x.jsxs)("div",{className:"flex items-center",children:[(0,x.jsx)("p",{className:"text-sm font-semibold text-[#0195f6] mr-1",children:"Share"}),y&&(0,x.jsx)(w.Z,{width:15,height:15})]})})]})})})},W=r.memo(V),H=s(2631),_=function(e){var t=e.post,s=e.setText,n=e.text,a=(0,j.v9)((function(e){return e.userReducer.user})),i=(0,r.useState)(!1),l=(0,u.Z)(i,2),c=l[0],o=l[1];return(0,x.jsxs)("div",{className:"flex lg:flex-row flex-col h-[calc(100%-50px)]",children:[(0,x.jsx)("div",{className:"lg:w-[700px] w-[400px] lg:h-full h-[50%]",children:(0,x.jsx)("img",{alt:"postphoto",src:URL.createObjectURL(t.images[0]),className:"w-full h-full object-contain bg-black lg:rounded-bl-xl"})}),(0,x.jsx)("div",{className:"lg:w-[calc(100%-700px)] w-full py-5 lg:h-full h-[50%]",children:(0,x.jsxs)("div",{className:"flex flex-col",children:[(0,x.jsxs)("div",{className:"flex",children:[(0,x.jsx)("div",{className:"overflow-hidden mr-3 pl-5",children:(0,x.jsx)("img",{alt:"userPhoto",src:a.imageUrl?a.imageUrl:"/images/standart-profile.png",className:"w-7 h-7 object-cover rounded-full"})}),(0,x.jsx)("p",{className:"font-semibold mt-0.5",children:a.displayName})]}),(0,x.jsx)("textarea",{value:n,className:"outline-none mt-5 resize-none lg:h-[170px] max-h-[100px] h-full px-5",placeholder:"Write a caption...",onChange:function(e){return function(e){console.log(n);var t=e.target.value;s(t)}(e)}}),(0,x.jsxs)("div",{className:"h-[50px] flex justify-between items-center border-b relative",children:[(0,x.jsx)("button",{className:"pl-5",onClick:function(){return o((function(e){return!e}))},children:(0,x.jsx)("img",{alt:"emoji",src:"/images/smile-icon.png",className:"w-5 h-5 opacity-50"})}),(0,x.jsx)(H.Z,{showPicker:c,setShowPicker:o,pickerStyle:{width:"250px",position:"absolute",top:"50px",left:"0px",zIndex:"21"},setText:s}),(0,x.jsxs)("p",{className:"text-xs text-black/40 pr-5",children:[n.length," / 2,200"]})]})]})})]})},O=r.memo(_),q=function(e){var t=e.activeModal,s=e.setActiveModal,n=e.setPage,a=e.setPost,i=e.post,l=(0,r.useState)(""),c=(0,u.Z)(l,2),o=c[0],d=c[1];return(0,x.jsx)(R.Z,{activeModal:t,setActiveModal:s,styleForContainerBlock:"fixed w-screen h-screen top-0 left-0 right-0 flex justify-center items-center z-20 cursor-default bg-black/60 duration-300",closeModal:function(){n(0),a({images:[]})},children:(0,x.jsxs)("div",{className:"mx-5 lg:max-w-[1050px] max-w-[400px] w-full h-[80vh] bg-white rounded-xl duration-300 ".concat(t?"opacity-1 scale-100":"opacity-0 scale-50"),onClick:function(e){return e.stopPropagation()},children:[(0,x.jsx)(W,{setPage:n,post:i,text:o,setPost:a,setActiveModal:s}),(0,x.jsx)(O,{text:o,setText:d,post:i})]})})},Y=r.memo(q),G=function(e){var t=e.activeModal,s=e.setActiveModal,n=(0,r.useState)(0),a=(0,u.Z)(n,2),i=a[0],l=a[1],c=(0,r.useState)({images:[]}),o=(0,u.Z)(c,2),d=o[0],m=o[1];return(0,x.jsxs)(x.Fragment,{children:[0===i&&(0,x.jsx)(E,{activeModal:t,setActiveModal:s,setPage:l,setPost:m,post:d}),1===i&&(0,x.jsx)(Y,{activeModal:t,setActiveModal:s,setPage:l,setPost:m,post:d,page:i})]})},J=r.memo(G),K=s(519),Q=function(e){var t=e.text,s=e.style,r=e.imageUrl,a=e.action,i=e.link,l={backgroundImage:"url(".concat(r,")"),backgroundSize:"15px 15px",backgroundRepeat:"no-repeat",backgroundPosition:"top 15px left 15px"};return(0,x.jsx)("div",{onClick:a,style:r?l:{paddingLeft:"15px",borderTop:"1px solid rgb(220, 220, 220)"},className:"".concat(s),children:i?(0,x.jsx)(n.rU,{to:i,children:(0,x.jsx)("p",{children:t})}):(0,x.jsx)("p",{children:t})})},X=r.memo(Q),$=s(3934),ee=function(e){var t=e.activeModal,s=e.setActiveModal,r=(0,j.v9)((function(e){return e.userReducer.user}));return(0,x.jsxs)($.Z,{activeModal:t,setActiveModal:s,textTitle:"Switch accounts",styleBlock:"bg-white w-[400px] rounded-xl duration-300",children:[(0,x.jsxs)("div",{className:"flex flex-row px-5 py-3 justify-between items-center border-b ",children:[(0,x.jsxs)("div",{className:"flex items-center",children:[(0,x.jsx)("img",{className:"w-[56px] h-[56px] rounded-full object-cover mr-3",alt:"userPhoto",src:r.imageUrl?r.imageUrl:"/images/standart-profile.png"}),(0,x.jsx)("p",{className:"font-semibold text-sm",children:r.displayName})]}),(0,x.jsxs)("div",{className:"relative",children:[(0,x.jsx)("img",{src:"/images/circle-full-blue-icon.png",className:"h-6 w-6 ml-5"}),(0,x.jsx)("img",{src:"/images/check-white-icon.png",className:"absolute h-5 w-5 top-0.5 right-0.5"})]})]}),(0,x.jsx)("div",{className:"flex justify-center",children:(0,x.jsx)("button",{className:"text-sm text-[#0195f6] h-[50px] font-semibold",type:"button",onClick:function(){console.log(1)},children:"Log into an Existing Account"})})]})},te=function(e){var t=e.dropMenuProfile,s=e.setDropMenuProfile,n=(0,j.v9)((function(e){return e.userReducer.user})),l=(0,r.useState)(!1),c=(0,u.Z)(l,2),d=c[0],f=c[1],h=(0,r.useContext)(a._),w=h.signOut,N=h.auth,y=h.setFirestoreCurrentUser,b=h.firestoreCurrentUser,U=(0,g.s0)(),k=(0,j.I0)(),Z=function(){var e=(0,o.Z)(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y({displayName:"",name:"",email:"",password:"",imageUrl:"",birthday:{year:"",day:"",month:""},uid:"",followers:[],following:[],posts:[],savedPosts:[],recentVisitedUsers:[]}),k((0,v.a)(b)),e.next=4,w(N);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(p,{styleForWindowBlock:"w-full h-full fixed top-0 left-0 flex justify-center items-center z-20 cursor-default ",styleForContainerBlock:"absolute w-60 shadow-defaultModal rounded bg-white flex items-center right-0 p-0 m-0 z-30",styleForInnerBlock:"flex items-center flex-col w-full",dropMenuProfile:t,setDropMenuProfile:s,children:[(0,x.jsx)(X,{imageUrl:"../images/user-icon.png",text:"Profile",action:function(){s(!1)},style:"leading-[2.7rem] hover:bg-slate-50 w-full flex-1 text-sm relative pl-12",link:"/".concat(n.displayName)}),(0,x.jsx)(X,{imageUrl:"../images/save-icon.png",text:"Saved",action:function(){U("/".concat(n.displayName,"/").concat(K.si)),s(!1)},style:"leading-[2.7rem] hover:bg-slate-50 w-full flex-1 text-sm relative pl-12",link:"/".concat(n.displayName)}),(0,x.jsx)(X,{imageUrl:"../images/settings-icon.png",text:"Settings",action:Z,style:"leading-[2.7rem] hover:bg-slate-50 w-full flex-1 text-sm relative pl-12",link:"/".concat(n.displayName)}),(0,x.jsx)(X,{imageUrl:"../images/exchange-icon.png",text:"Change user",action:function(){f(!0),s(!1)},style:"leading-[2.7rem] hover:bg-slate-50 w-full flex-1 text-sm relative pl-12"}),(0,x.jsx)(X,{imageUrl:null,text:"Exit",action:Z,style:"leading-[2.7rem] hover:bg-slate-50 w-full flex-1 text-sm relative pl-12",link:i.H4})]}),(0,x.jsx)(ee,{activeModal:d,setActiveModal:f})]})},se=r.memo(te),re=s(1485),ne=function(e){var t=e.activity,s=(0,j.v9)((function(e){return e.userReducer.user})),r="Now";return r="Now"===(r=(0,re.Z)(t.createdAt).split(" "))[1]?"Now":r[0]+r[1][0],(0,x.jsxs)("div",{className:"flex items-center my-3",children:[(0,x.jsx)(n.rU,{to:"/".concat(t.displayName),children:(0,x.jsx)("div",{className:"overflow-hidden rounded-full w-[44px] h-[44px] mr-3",children:(0,x.jsx)("img",{alt:"userPhoto",src:"".concat(t.imageUrl?t.imageUrl:"/images/standart-profile.png"),className:"w-full h-full object-cover"})})}),(0,x.jsxs)("div",{className:"w-full flex",children:[(0,x.jsx)(n.rU,{to:"/".concat(t.displayName),children:(0,x.jsx)("p",{className:"font-semibold text-sm mr-2",children:t.displayName})}),(0,x.jsx)("p",{className:"text-sm mr-1",children:"liked your photo."}),(0,x.jsx)("p",{className:"text-sm text-gray-500/70",children:r})]}),(0,x.jsx)("div",{className:"min-w-[40px] h-[40px]",children:(0,x.jsx)(n.rU,{to:"/".concat(s.displayName,"/").concat(t.post.uid),children:(0,x.jsx)("img",{alt:"postPhoto",src:t.post.imageUrl,className:"object-cover w-[40px] h-[40px]"})})})]})},ae=r.memo(ne),ie=function(e){var t=e.activity,s=(0,j.v9)((function(e){return e.userReducer.user})),r="Now";return r="Now"===(r=(0,re.Z)(t.createdAt).split(" "))[1]?"Now":r[0]+r[1][0],(0,x.jsxs)("div",{className:"flex items-center my-3",children:[(0,x.jsx)(n.rU,{to:"/".concat(t.displayName),children:(0,x.jsx)("div",{className:"overflow-hidden rounded-full w-[44px] h-[44px] mr-3",children:(0,x.jsx)("img",{alt:"userPhoto",src:"".concat(t.imageUrl?t.imageUrl:"/images/standart-profile.png"),className:"w-full h-full object-cover"})})}),(0,x.jsxs)("div",{className:"w-full flex",children:[(0,x.jsx)(n.rU,{to:"/".concat(t.displayName),children:(0,x.jsx)("p",{className:"font-semibold text-sm mr-2",children:t.displayName})}),(0,x.jsx)("p",{className:"text-sm mr-1",children:"commented: "}),(0,x.jsx)("p",{className:"text-sm mr-1 max-w-[60px]",children:t.text}),(0,x.jsx)("p",{className:"text-sm text-gray-500/70",children:r})]}),(0,x.jsx)("div",{className:"min-w-[40px] h-[40px]",children:(0,x.jsx)(n.rU,{to:"/".concat(s.displayName,"/").concat(t.post.uid),children:(0,x.jsx)("img",{alt:"postPhoto",src:t.post.imageUrl,className:"object-cover w-[40px] h-[40px]"})})})]})},le=r.memo(ie),ce=s(7934),oe=s(795),ue=function(e){var t=e.activity,s=(0,r.useState)(!1),a=(0,u.Z)(s,2),i=a[0],l=a[1],c=t.displayName,o=t.name,d=t.uid,m=t.imageUrl,f=(0,j.v9)((function(e){return e.userReducer.user})),p=(0,oe.Z)({displayName:c,uid:d,imageUrl:m,name:o}).hendleFollow,h=f.following&&f.following.find((function(e){return e.displayName===c})),g="Now";return g="Now"===(g=(0,re.Z)(t.createdAt).split(" "))[1]?"Now":g[0]+g[1][0],(0,x.jsxs)("div",{className:"flex items-center my-3",children:[(0,x.jsx)(n.rU,{to:"/".concat(t.displayName),children:(0,x.jsx)("div",{className:"overflow-hidden rounded-full w-[44px] h-[44px] mr-3",children:(0,x.jsx)("img",{alt:"userPhoto",src:"".concat(t.imageUrl?t.imageUrl:"/images/standart-profile.png"),className:"w-full h-full object-cover"})})}),(0,x.jsxs)("div",{className:"w-full flex",children:[(0,x.jsx)(n.rU,{to:"/".concat(t.displayName),children:(0,x.jsx)("p",{className:"font-semibold text-sm mr-2",children:t.displayName})}),(0,x.jsx)("p",{className:"text-sm mr-1",children:"started following you."}),(0,x.jsx)("p",{className:"text-sm text-gray-500/70",children:g})]}),h?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("button",{type:"button",onClick:function(){return l(!0)},className:"active:opacity-60 text-sm font-semibold border px-3.5 py-1",children:"Following"}),(0,x.jsx)(R.Z,{activeModal:i,setActiveModal:l,styleForContainerBlock:"fixed w-screen h-screen top-0 left-0 right-0 flex justify-center items-center z-10 cursor-default bg-black/60 duration-300",children:(0,x.jsx)(ce.Z,{activeModal:i,imageUrl:m,displayName:c,name:o,uid:d,setActiveModal:l})})]}):(0,x.jsx)("button",{type:"button",onClick:function(){return p()},className:"active:opacity-60 text-white text-sm px-6 py-1.5 bg-[#0195f6] rounded font-semibold",children:"Follow"})]})},de=r.memo(ue),me=function(e){var t=e.activity;return(0,x.jsxs)(x.Fragment,{children:["like"===t.type&&(0,x.jsx)(ae,{activity:t}),"comment"===t.type&&(0,x.jsx)(le,{activity:t}),"follower"===t.type&&(0,x.jsx)(de,{activity:t})]})},xe=r.memo(me),fe=function(e){var t=e.dropMenuHeart,s=e.setDropMenuHeart,n=(0,r.useState)([]),i=(0,u.Z)(n,2),d=i[0],f=i[1],h=(0,r.useState)(!1),g=(0,u.Z)(h,2),v=g[0],N=g[1],y=(0,r.useContext)(a._),b=y.doc,U=y.db,k=y.getDoc,Z=(0,j.v9)((function(e){return e.userReducer.user}));(0,r.useEffect)((function(){N(!0);var e=function(){var e=(0,o.Z)(m().mark((function e(){var t,s,r,n,a,i,o;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b(U,"users",Z.uid),e.next=3,k(t);case 3:s=e.sent,r=s.data(),n=[],a=r.followers.map((function(e){return(0,c.Z)((0,c.Z)({},e),{},{type:"follower"})})),i=[],r.posts.forEach((function(e){var t=e.likes.filter((function(e){return e.uid!==Z.uid})).map((function(t){return(0,c.Z)((0,c.Z)({},t),{},{type:"like",user:(0,c.Z)({},e.user),post:{uid:e.uid,imageUrl:e.image}})})),s=e.comments.filter((function(e){return e.userUid!==Z.uid})).map((function(t){return(0,c.Z)((0,c.Z)({},t),{},{type:"comment",likes:(0,c.Z)({},t.likes),user:(0,c.Z)({},e.user),post:{uid:e.uid,imageUrl:e.image}})}));n.push.apply(n,(0,l.Z)(t)),i.push.apply(i,(0,l.Z)(s))})),o=[].concat(n,(0,l.Z)(a),i).sort((function(e,t){return t.createdAt-e.createdAt})),f(o),N(!1);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t]),console.log(1);var M=(0,r.useMemo)((function(){return d.map((function(e,t){return(0,x.jsx)(xe,{activity:e},t)}))}),[d]);return(0,x.jsx)(p,{styleForWindowBlock:"w-full h-full fixed top-0 left-0 flex justify-center items-center z-20 cursor-default ",styleForContainerBlock:"absolute w-[24rem] sm:w-[32rem] ".concat(v?"h-[9rem]":"h-[18rem]"," shadow-defaultModal rounded bg-white flex items-center top-10 -right-10 p-0 m-0 z-30 cursor-pointer"),styleForInnerBlock:"flex items-center flex-col w-full h-full",dropMenuProfile:t,setDropMenuProfile:s,children:d.length>0?(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("ul",{className:"flex flex-col p-4 overflow-y-auto w-full",children:[(0,x.jsx)("p",{className:"font-semibold w-full text-sm",children:"Your activities"}),v?(0,x.jsx)("div",{className:"mt-3",children:(0,x.jsx)(w.Z,{height:30,width:30})}):M]})}):(0,x.jsxs)("div",{className:"flex items-center justify-center flex-col h-full",children:[(0,x.jsxs)("div",{className:"relative",children:[(0,x.jsx)("img",{alt:"circle",src:"/images/circle-contor.png",className:"h-14 w-14"}),(0,x.jsx)("img",{alt:"heart",src:"/images/heart-uncolored.png",className:"h-7 w-7 absolute top-3.5 left-3.5"})]}),(0,x.jsx)("p",{className:"text-sm mt-3",children:"Activity On Your Posts"}),(0,x.jsx)("p",{className:"text-sm max-w-[420px] text-center mt-3",children:"When someone likes or comments on one of your posts, you'll see it here."})]})})},pe=r.memo(fe),he=function(){var e=(0,r.useContext)(a._).firestoreCurrentUser,t=(0,j.v9)((function(e){return e.userReducer.user})),s=(0,g.TH)(),l=(0,r.useState)(!1),c=(0,u.Z)(l,2),o=c[0],d=c[1],m=(0,r.useState)(!1),f=(0,u.Z)(m,2),p=f[0],h=f[1],w=(0,r.useState)(!1),N=(0,u.Z)(w,2),y=N[0],b=N[1],U=(0,j.I0)();(0,r.useEffect)((function(){U((0,v.a)(e))}),[e]);var k=function(){b((function(e){return!e}))},Z=o||p||y;return(0,x.jsxs)("div",{className:"flex justify-between items-center",children:[(0,x.jsx)("div",{className:"xs:mr-6 mr-3 cursor-pointer",children:(0,x.jsx)(n.rU,{to:i.Sd,children:(0,x.jsx)("img",{"data-name":"home",src:"/instagram-app"+"/images/home-".concat("/"!==s.pathname||Z?"un":"","colored.png"),alt:"home",className:"xs:h-6 h-5"})})}),(0,x.jsx)("div",{className:"xs:mr-6 mr-3 cursor-pointer",children:(0,x.jsx)(n.rU,{to:"".concat(i.qd),children:(0,x.jsx)("img",{"data-name":"messenger",src:"/images/messenger-".concat(s.pathname.includes(i.qd)&&!Z?"":"un","colored.png"),alt:"messenger",className:"xs:h-6 h-5"})})}),(0,x.jsxs)("div",{className:"xs:mr-6 mr-3 cursor-pointer",onClick:k,children:[(0,x.jsx)("img",{"data-name":"add",src:"/images/add-".concat(y?"":"un","colored.png"),alt:"add",className:"xs:h-6 h-5"}),(0,x.jsx)(J,{activeModal:y,setActiveModal:k})]}),(0,x.jsx)("div",{className:"xs:mr-6 mr-3 cursor-pointer",children:(0,x.jsx)(n.rU,{to:i.Lo,children:(0,x.jsx)("img",{"data-name":"compass",src:"/images/compass-".concat(s.pathname!==i.Lo||Z?"un":"","colored.png"),alt:"compass",className:"xs:h-6 h-5"})})}),(0,x.jsxs)("div",{className:"xs:mr-6 mr-3 cursor-pointer relative",children:[(0,x.jsx)("img",{"data-name":"heart",src:"/images/heart-".concat(p?"":"un","colored.png"),alt:"heart",className:"xs:h-6 h-5",onClick:function(){h(!0)}}),(0,x.jsx)(pe,{dropMenuHeart:p,setDropMenuHeart:h})]}),(0,x.jsxs)("div",{className:"xs:mr-6 mr-3 cursor-pointer box-border relative ",children:[(0,x.jsx)("button",{className:"rounded-full overflow-hidden mt-1 border p-0.5 xs:h-[1.9rem] xs:w-[1.9rem] h-[1.55rem] w-[1.55rem]\n                ".concat(!(s.pathname==="/"+t.displayName||o||s.pathname.includes("saved")||s.pathname.includes("tagged")&&s.pathname.includes(t.displayName))||p||y?"border-transparent":"border-black"),"data-name":"profile",onClick:function(){d(!0)},children:(0,x.jsx)("img",{src:t.imageUrl?t.imageUrl:"/images/standart-profile.png",className:"w-full h-full object-cover overflow-hidden rounded-full ",alt:"profile"})}),(0,x.jsx)(se,{dropMenuProfile:o,setDropMenuProfile:d})]})]})},ge=r.memo(he),je=s(749),ve=function(){var e=(0,r.useContext)(a._).auth,t=(0,je.Z)();return console.log(t),(0,x.jsx)("header",{className:"h-16 border-b flex justify-center bg-white sticky top-0 w-full z-10 ",children:(0,x.jsx)("div",{className:"container max-w-5xl mt-3 relative pl-5 ",children:(0,x.jsxs)("div",{className:"flex justify-between items-center",children:[(0,x.jsx)("div",{className:"max-w-[33%] w-full",children:(0,x.jsx)(n.rU,{to:i.Sd,children:(0,x.jsx)("img",{src:"/images/instagram.png",alt:"instagram",className:"h-10"})})}),t.innerWidth>900?(0,x.jsx)("div",{className:"max-w-[33%] w-full h-9",children:(0,x.jsx)(A,{})}):null,e.currentUser?(0,x.jsx)(ge,{}):(0,x.jsx)(F,{})]})})})},we=r.memo(ve)},749:function(e,t,s){s.d(t,{Z:function(){return i}});var r=s(885),n=s(2791),a=function(){var e=window;return{innerWidth:e.innerWidth,innerHeight:e.innerHeight}},i=function(){var e=(0,n.useState)(),t=(0,r.Z)(e,2),s=t[0],i=t[1];return(0,n.useEffect)((function(){var e=function(){i(a())};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),s||a()}}}]);
//# sourceMappingURL=480.3ae7d24b.chunk.js.map