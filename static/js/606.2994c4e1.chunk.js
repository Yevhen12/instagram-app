"use strict";(self.webpackChunkinstagram=self.webpackChunkinstagram||[]).push([[606,697],{4606:function(e,t,s){s.r(t),s.d(t,{default:function(){return U}});var n=s(5861),r=s(885),a=s(7757),c=s.n(a),l=s(2791),i=s(8480),o=s(6030),u=s(2982),d=s(4177),m=s(4117),h=s(6871),f=s(6974),x=s(184),p=function(e){var t=e.activeModal,s=e.setActiveModal,a=(0,l.useState)(""),i=(0,r.Z)(a,2),p=i[0],g=i[1],v=(0,l.useState)([]),j=(0,r.Z)(v,2),N=j[0],b=j[1],y=(0,l.useState)([]),w=(0,r.Z)(y,2),k=w[0],Z=w[1],C=(0,m.Z)().searchUsers,M=(0,o.v9)((function(e){return e.chatsReducer.chats}));console.log("New");var S=(0,f.Z)(M).createChat,O=(0,h.s0)(),U=(0,l.useCallback)(function(){var e=(0,n.Z)(c().mark((function e(t){var s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.target.value,g(s),e.t0=b,e.next=5,C(s);case 5:e.t1=e.sent,(0,e.t0)(e.t1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),E=(0,l.useCallback)((function(e){Z((function(t){return[].concat((0,u.Z)(t),[e])})),g("")}),[]),R=(0,l.useCallback)((function(e){var t=k.filter((function(t){return t.uid!==e.uid}));Z((0,u.Z)(t))}),[]),A=(0,l.useCallback)((function(){s(!1),b([]),Z([]),g("")}),[]),P=function(){var e=(0,n.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(t);case 2:n=e.sent,O("/direct/".concat(n)),s(!1),b([]),Z([]),g("");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=(0,l.useMemo)((function(){return N.map((function(e){var t=k.length>0&&k.find((function(t){return t.uid===e.uid}));return(0,x.jsx)("li",{className:"py-1.5 pl-4 hover:bg-gray-100/50 cursor-pointer",onClick:function(){return t?R(e):E(e)},children:(0,x.jsxs)("div",{className:"flex justify-start items-center",children:[(0,x.jsx)("div",{className:"w-[2.75rem] h-[2.75rem] rounded-full overflow-hidden mt-1",children:(0,x.jsx)("img",{className:"w-full h-full object-cover",src:"".concat(e.imageUrl?e.imageUrl:"/images/standart-profile.png"),alt:"UserPhoto"})}),(0,x.jsx)("div",{className:"w-[15rem] ml-3",children:(0,x.jsx)("p",{className:"font-semibold text-sm",children:e.displayName})}),(0,x.jsxs)("div",{className:"relative",children:[(0,x.jsx)("img",{src:"".concat(t?"/images/circle-full-blue-icon.png":"/images/circle-contor.png"),className:"h-6 w-6 ml-5"}),t&&(0,x.jsx)("img",{src:"/images/check-white-icon.png",className:"absolute h-5 w-5 top-0.5 right-0.5"})]})]})},e.uid)}))}),[N]),F=(0,l.useMemo)((function(){return k.map((function(e){return(0,x.jsxs)("div",{className:"bg-[#0195f6]/10 flex items-center px-2 py-1 mt-2 mr-2 rounded cursor-pointer",onClick:function(){return R(e)},children:[(0,x.jsx)("div",{type:"button",className:" text-[#0195f6] rounded text-sm",children:e.displayName}),(0,x.jsx)("img",{src:"/images/close-icon-blue.png",className:"w-3 h-3 ml-2 mt-0.5"})]},e.uid)}))}),[k]);return(0,x.jsx)(d.Z,{activeModal:t,setActiveModal:s,styleForContainerBlock:"fixed w-screen h-screen top-0 left-0 right-0 flex justify-center items-center z-20 cursor-default bg-black/60 duration-300",closeModal:A,children:(0,x.jsxs)("div",{onClick:function(e){return e.stopPropagation()},className:"bg-white w-[400px] h-2/3 rounded-xl duration-300 flex flex-col ".concat(t?"scale-100":"scale-50"),children:[(0,x.jsx)("div",{className:"border-b px-4 py-2",children:(0,x.jsxs)("div",{className:"flex justify-between ",children:[(0,x.jsx)("button",{className:"h-3.5 w-3.5 mt-2",onClick:function(){return A()},children:(0,x.jsx)("img",{src:"/images/close-icon.png"})}),(0,x.jsx)("div",{children:(0,x.jsx)("p",{className:"font-semibold",children:"New message"})}),(0,x.jsx)("button",{type:"button",className:"".concat(k.length>0?"text-[#0195f6]":"text-[#0195f6]/30"," font-semibold text-sm"),disabled:!(k.length>0),onClick:function(){return P(k)},children:"Next"})]})}),(0,x.jsxs)("div",{className:"flex px-4 min-h-[55px] max-h-[calc(50%-41px)] border-b overflow-y-scroll",children:[(0,x.jsx)("p",{className:"font-semibold mr-6 mt-3.5",children:"To: "}),(0,x.jsxs)("div",{style:{wordWrap:"normal"},className:"flex flex-row flex-wrap",children:[k.length>0&&F,(0,x.jsx)("input",{placeholder:"Search...",className:"outline-none placeholder:text-sm placeholder:text-gray-300 text-sm w-[300px] my-3",value:p,onChange:function(e){return U(e)}})]})]}),(0,x.jsx)("div",{className:"rounded-xl overflow-y-scroll h-[calc(100%-96px)] w-full",children:0===p.length?(0,x.jsxs)("div",{className:"px-4 mt-4",children:[(0,x.jsx)("p",{className:"font-semibold text-sm",children:"Suggested"}),(0,x.jsx)("p",{className:"text-gray-500 text-sm mt-7",children:"No account found."})]}):T.length>0?(0,x.jsx)("ul",{className:"mt-3",children:T}):(0,x.jsx)("p",{className:"text-gray-500 text-sm mt-7 ml-4",children:"No account found."})})]})})},g=l.memo(p),v=s(5304),j=s(3405),N=s(3697),b=s(3504),y=s(1485),w=function(e){var t=e.chat,s=(e.idx,(0,o.v9)((function(e){return e.userReducer.user}))),n=(0,h.TH)(),r=t.users.find((function(e){return e.uid!==s.uid})),a="Now";return t.messages.length>0&&(a=(0,y.Z)(t.messages[t.messages.length-1].uniqKey_time).split(" "),console.log(a[1]),a="Now"===a[1]?"Now":a[0]+a[1][0]),(0,x.jsx)("li",{className:"py-1.5 pl-4 hover:bg-gray-100/50 cursor-pointer ".concat(n.pathname==="/direct/".concat(t.uid)&&"bg-black/5 hover:bg-black/5 cursor-default"),children:(0,x.jsx)(b.rU,{to:t.uid,className:"".concat(n.pathname==="/direct/".concat(t.uid)&&"cursor-default"),children:(0,x.jsxs)("div",{className:"flex justify-left items-center",children:[(0,x.jsx)("div",{className:"w-[3.5rem] h-[3.5rem] rounded-full overflow-hidden mt-1 mr-3",children:(0,x.jsx)("img",{className:"w-full h-full object-cover",src:"".concat(r.imageUrl?r.imageUrl:"/images/standart-profile.png"),alt:"UserPhoto"})}),(0,x.jsxs)("div",{className:"w-[15.5rem] pr-5",children:[(0,x.jsx)("p",{className:"text-sm",children:r.displayName}),(0,x.jsxs)("div",{className:"flex",children:[(0,x.jsxs)("p",{className:"text-sm text-black/40 max-w-[115px] overflow-hidden mr-1",children:[t.messages.length>0&&t.messages[t.messages.length-1].text," "]}),(0,x.jsxs)("p",{className:"text-sm text-black/40 min-w-[30px]",children:[" \xb7 ",a]})]})]})]})})})},k=l.memo(w),Z=s(6839),C=function(){return(0,x.jsxs)("div",{className:"flex pl-4 mt-2",children:[(0,x.jsx)("div",{children:(0,x.jsx)(Z.Z,{circle:!0,width:56,height:56})}),(0,x.jsx)("div",{children:(0,x.jsx)(Z.Z,{width:100,height:10,count:2,containerClassName:"flex flex-col items-center justify-center h-full ml-3",className:"my-1"})})]})},M=l.memo(C),S=(s(5862),s(9617)),O=function(){var e=(0,l.useState)(!1),t=(0,r.Z)(e,2),s=t[0],a=t[1],u=(0,l.useState)(!1),d=(0,r.Z)(u,2),m=d[0],f=d[1],p=(0,o.v9)((function(e){return e.userReducer.user})),b=(0,o.v9)((function(e){return e.chatsReducer.chats})),y=(0,l.useContext)(v._),w=y.db,Z=y.collection,C=y.getDocs,O=(0,o.I0)(),U=(0,h.TH)(),E=(0,h.UO)().chat,R=b.find((function(e){return E===e.uid}));(0,l.useEffect)((function(){f(!0);var e=function(){var e=(0,n.Z)(c().mark((function e(){var t,s,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(Z(w,"chats"));case 2:t=e.sent,s=t.docs.map((function(e){return e.data()})),n=s.filter((function(e){return e.users.map((function(e){return e.uid})).includes(p.uid)})),O((0,j.N)(n)),f(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[p.uid]);var A=b.sort((function(e,t){return t.messages.length&&e.messages.length?t.messages[t.messages.length-1].uniqKey_time-e.messages[e.messages.length-1].uniqKey_time:t.uid-e.uid})),P=(0,l.useCallback)((function(){a(!0)}),[]),T=!R&&"/direct"!==U.pathname,F=(0,l.useMemo)((function(){return A.map((function(e,t){return(0,x.jsx)(k,{chat:e},t)}))}),[A]),I=Array(3).fill(0).map((function(e,t){return(0,x.jsx)(M,{},t)})),_=0===b.length||m;return(0,x.jsxs)("div",{children:[(0,x.jsx)(i.Z,{}),T?(0,x.jsx)(N.default,{}):(0,x.jsxs)("section",{className:"flex justify-center",children:[(0,x.jsx)("div",{className:"container max-w-5xl pt-3 pb-5 h-[calc(100vh-65px)] pl-6 pr-7",children:(0,x.jsxs)("div",{className:"border w-full h-full rounded bg-white flex",children:[(0,x.jsxs)("div",{className:"sm:w-[350px] w-full ".concat(R?"sm:block hidden":"block"),children:[(0,x.jsx)("div",{className:"h-[60px] border-b border-r",children:(0,x.jsxs)("div",{className:"h-[60px] flex justify-center items-center relative",children:[(0,x.jsx)("button",{type:"button",className:"p-2",children:(0,x.jsxs)("div",{className:"flex",children:[(0,x.jsx)("div",{className:"mr-1",children:(0,x.jsx)("p",{className:"font-semibold",children:p.displayName})}),(0,x.jsx)("div",{children:(0,x.jsx)("img",{className:"h-6 w-6",src:"/images/down-arrow.png"})})]})}),(0,x.jsx)("div",{className:"mt-1.5 absolute top-3.5 right-3.5",children:(0,x.jsx)("button",{type:"button",children:(0,x.jsx)("img",{src:"/images/new-message-icon.png",className:"w-5 h-5",onClick:P})})})]})}),(0,x.jsx)("div",{className:"h-[calc(100%-60px)] border-r overflow-y-auto",children:(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"font-semibold p-3",children:"Messages"}),(0,x.jsx)("ul",{className:"flex flex-col",children:_?(0,x.jsxs)(x.Fragment,{children:[I,(0,x.jsx)("div",{className:"h-full justify-center flex items-center mt-8",children:(0,x.jsx)(S.Z,{height:30,width:30})})]}):F})]})})]}),"/direct"===U.pathname?(0,x.jsx)("div",{className:"w-[calc(100%-350px)] hidden sm:block",children:(0,x.jsxs)("div",{className:"h-full flex items-center justify-center flex-col",children:[(0,x.jsx)("div",{className:"w-24 h-24",children:(0,x.jsx)("img",{src:"/images/send-message-circle-icon.png"})}),(0,x.jsx)("div",{className:"mt-3",children:(0,x.jsx)("p",{className:"font-light text-2xl",children:"Your Messages"})}),(0,x.jsx)("div",{className:"mt-2",children:(0,x.jsx)("p",{className:"font-light text-sm text-gray-500 text-center",children:"Send private photos and messages to a friend or group."})}),(0,x.jsx)("button",{type:"button",className:"rounded bg-[#0195f6] px-2.5 py-1.5 text-sm text-white font-semibold mt-5",onClick:P,children:"Send Message"})]})}):(0,x.jsx)(h.j3,{})]})}),(0,x.jsx)(g,{activeModal:s,setActiveModal:a})]})]})},U=l.memo(O)},3697:function(e,t,s){s.r(t);var n=s(2791),r=s(184),a=function(){return(0,r.jsx)("h1",{children:"Not Found"})};t.default=n.memo(a)},5862:function(){},6839:function(e,t,s){s.d(t,{Z:function(){return o}});var n=s(885),r=s(1413);function a(e,t){if(null==e)return{};var s,n,r=function(e,t){if(null==e)return{};var s,n,r={},a=Object.keys(e);for(n=0;n<a.length;n++)s=a[n],t.indexOf(s)>=0||(r[s]=e[s]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)s=a[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}var c=s(2791),l=["count","wrapper","className","containerClassName","containerTestId","circle","style"],i=c.createContext({});function o(e){for(var t,s,o,u=e.count,d=void 0===u?1:u,m=e.wrapper,h=e.className,f=e.containerClassName,x=e.containerTestId,p=e.circle,g=void 0!==p&&p,v=e.style,j=a(e,l),N=c.useContext(i),b=(0,r.Z)({},j),y=0,w=Object.entries(j);y<w.length;y++){var k=(0,n.Z)(w[y],2),Z=k[0];"undefined"===typeof k[1]&&delete b[Z]}var C=(0,r.Z)((0,r.Z)((0,r.Z)({},N),b),{},{circle:g}),M=(0,r.Z)((0,r.Z)({},v),function(e){var t=e.baseColor,s=e.highlightColor,n=e.width,r=e.height,a=e.borderRadius,c=e.circle,l=e.direction,i=e.duration,o=e.enableAnimation,u=void 0===o||o,d={};return"rtl"===l&&(d["--animation-direction"]="reverse"),"number"===typeof i&&(d["--animation-duration"]="".concat(i,"s")),u||(d["--pseudo-element-display"]="none"),"string"!==typeof n&&"number"!==typeof n||(d.width=n),"string"!==typeof r&&"number"!==typeof r||(d.height=r),"string"!==typeof a&&"number"!==typeof a||(d.borderRadius=a),c&&(d.borderRadius="50%"),"undefined"!==typeof t&&(d["--base-color"]=t),"undefined"!==typeof s&&(d["--highlight-color"]=s),d}(C)),S="react-loading-skeleton";h&&(S+=" ".concat(h));for(var O=null!==(t=C.inline)&&void 0!==t&&t,U=[],E=Math.ceil(d),R=0;R<E;R++){var A=M;if(E>d&&R===E-1){var P=null!==(s=A.width)&&void 0!==s?s:"100%",T=d%1,F="number"===typeof P?P*T:"calc(".concat(P," * ").concat(T,")");A=(0,r.Z)((0,r.Z)({},A),{},{width:F})}var I=c.createElement("span",{className:S,style:A,key:R},"\u200c");O?U.push(I):U.push(c.createElement(c.Fragment,{key:R},I,c.createElement("br",null)))}return c.createElement("span",{className:f,"data-testid":x,"aria-live":"polite","aria-busy":null===(o=C.enableAnimation)||void 0===o||o},m?U.map((function(e,t){return c.createElement(m,{key:t},e)})):U)}}}]);
//# sourceMappingURL=606.2994c4e1.chunk.js.map